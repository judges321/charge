{"code":"!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"/\",n(n.s=44)}([function(t,e){t.exports=self.AFAppX},function(t,e){var n=t.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=n)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){\"use strict\";var r=n(0),i=(r.bridge,r.bridge),o=\"https://www.p99.store/chargeMini\";function s(t,e,n){return null!=i.getStorageSync({key:\"access_token\"}).data?new Promise(function(r,s){i.httpRequest({url:o+e,data:JSON.stringify(n),method:t,headers:{\"Content-Type\":\"application/json\",Authorization:i.getStorageSync({key:\"access_token\"}).data},dataType:\"json\",success:function(t){if(\"200\"===t.data.returnCode){var e=t.data.returnData;e||(e=\"\"),r(e)}else{var n={returnCode:t.data.returnCode,returnMsg:t.data.returnMsg};s(n)}},fail:function(t){console.log(t)}})}):new Promise(function(r,s){i.httpRequest({url:o+e,data:JSON.stringify(n),method:t,headers:{\"Content-Type\":\"application/json\"},dataType:\"json\",success:function(t){if(\"200\"===t.data.returnCode){var e=t.data.returnData;e||(e=\"\"),r(e)}else{var n={returnCode:t.data.returnCode,returnMsg:t.data.returnMsg};s(n)}},fail:function(t){console.log(t)}})})}t.exports={get:function(t,e){return s(\"GET\",t,e)},post:function(t,e){return s(\"POST\",t,e)}}},function(t,e,n){var r=n(5),i=n(14);t.exports=n(6)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(12),i=n(35),o=n(19),s=Object.defineProperty;e.f=n(6)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported!\");return\"value\"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(13)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(t,e,n){var r=n(68),i=n(18);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(23)(\"wks\"),i=n(15),o=n(1).Symbol,s=\"function\"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)(\"Symbol.\"+t))}).store=r},function(t,e){t.exports=function(t){return\"object\"===typeof t?null!==t:\"function\"===typeof t}},function(t,e){t.exports=!0},function(t,e){var n=t.exports={version:\"2.5.7\"};\"number\"==typeof __e&&(__e=n)},function(t,e,n){var r=n(9);t.exports=function(t){if(!r(t))throw TypeError(t+\" is not an object!\");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++n+r).toString(36))}},function(t,e,n){\"use strict\";var r=n(0),i=(r.bridge,r.bridge,function(t){return(t=t.toString())[1]?t:\"0\"+t});t.exports={buttonClicked:function(t){t.setData({buttonClicked:!0}),setTimeout(function(){t.setData({buttonClicked:!1})},500)},formatTime:function(t){var e=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),o=t.getHours(),s=t.getMinutes(),a=t.getSeconds();return[e,n,r].map(i).join(\"/\")+\" \"+[o,s,a].map(i).join(\":\")}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError(\"Can't call method on  \"+t);return t}},function(t,e,n){var r=n(9);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&\"function\"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if(\"function\"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&\"function\"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError(\"Can't convert object to primitive value\")}},function(t,e){t.exports={}},function(t,e,n){var r=n(39),i=n(24);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(23)(\"keys\"),i=n(15);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(11),i=n(1),o=i[\"__core-js_shared__\"]||(i[\"__core-js_shared__\"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})(\"versions\",[]).push({version:r.version,mode:n(10)?\"pure\":\"global\",copyright:\"\\xa9 2018 Denis Pushkarev (zloirock.ru)\"})},function(t,e){t.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(t,e,n){var r=n(5).f,i=n(2),o=n(8)(\"toStringTag\");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){e.f=n(8)},function(t,e,n){var r=n(1),i=n(11),o=n(10),s=n(26),a=n(5).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});\"_\"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){var n;n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(t){\"object\"===typeof window&&(n=window)}t.exports=n},function(t,e,n){\"use strict\";(function(t){var r=n(57),i=n(58),o=n(59);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError(\"Invalid typed array length\");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if(\"number\"===typeof t){if(\"string\"===typeof e)throw new Error(\"If encoding is specified then the first argument must be a string\");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if(\"number\"===typeof e)throw new TypeError('\"value\" argument must not be a number');return\"undefined\"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError(\"'offset' is out of bounds\");if(e.byteLength<n+(r||0))throw new RangeError(\"'length' is out of bounds\");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=l(t,e);return t}(t,e,n,r):\"string\"===typeof e?function(t,e,n){\"string\"===typeof n&&\"\"!==n||(n=\"utf8\");if(!u.isEncoding(n))throw new TypeError('\"encoding\" must be a valid string encoding');var r=0|p(e,n),i=(t=a(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if(\"undefined\"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||\"length\"in e)return\"number\"!==typeof e.length||(r=e.length)!==r?a(t,0):l(t,e);if(\"Buffer\"===e.type&&o(e.data))return l(t,e.data)}var r;throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\")}(t,e)}function h(t){if(\"number\"!==typeof t)throw new TypeError('\"size\" argument must be a number');if(t<0)throw new RangeError('\"size\" argument must not be negative')}function f(t,e){if(h(e),t=a(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e){var n=e.length<0?0:0|d(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=s())throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+s().toString(16)+\" bytes\");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if(\"undefined\"!==typeof ArrayBuffer&&\"function\"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;\"string\"!==typeof t&&(t=\"\"+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case\"ascii\":case\"latin1\":case\"binary\":return n;case\"utf8\":case\"utf-8\":case void 0:return q(t).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*n;case\"hex\":return n>>>1;case\"base64\":return F(t).length;default:if(r)return q(t).length;e=(\"\"+e).toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if(\"string\"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if(\"string\"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if(\"number\"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&\"function\"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError(\"val must be string, number or Buffer\")}function m(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&(\"ucs2\"===(r=String(r).toLowerCase())||\"ucs-2\"===r||\"utf16le\"===r||\"utf-16le\"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var f=!0,l=0;l<u;l++)if(c(t,o+l)!==c(e,l)){f=!1;break}if(f)return o}return-1}function v(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!==0)throw new TypeError(\"Invalid hex string\");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function _(t,e,n,r){return Y(q(e,t.length-n),t,n,r)}function b(t,e,n,r){return Y(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return b(t,e,n,r)}function S(t,e,n,r){return Y(F(e),t,n,r)}function E(t,e,n,r){return Y(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],h=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(h=c);break;case 2:128===(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(h=u);break;case 3:o=t[i+1],s=t[i+2],128===(192&o)&&128===(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(h=u)}null===h?(h=65533,f=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=f}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var n=\"\",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&\"function\"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,\"undefined\"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return h(e),e<=0?a(t,e):void 0!==n?\"string\"===typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError(\"Arguments must be Buffers\");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('\"list\" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?\"\":0===arguments.length?T(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return\"\";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return\"\";if((n>>>=0)<=(e>>>=0))return\"\";for(t||(t=\"utf8\");;)switch(t){case\"hex\":return C(this,e,n);case\"utf8\":case\"utf-8\":return T(this,e,n);case\"ascii\":return k(this,e,n);case\"latin1\":case\"binary\":return M(this,e,n);case\"base64\":return I(this,e,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return P(this,e,n);default:if(r)throw new TypeError(\"Unknown encoding: \"+t);t=(t+\"\").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError(\"Argument must be a Buffer\");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t=\"\",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString(\"hex\",0,n).match(/.{2}/g).join(\" \"),this.length>n&&(t+=\" ... \")),\"<Buffer \"+t+\">\"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError(\"Argument must be a Buffer\");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError(\"out of range index\");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,a=Math.min(o,s),c=this.slice(r,i),h=t.slice(e,n),f=0;f<a;++f)if(c[f]!==h[f]){o=c[f],s=h[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r=\"utf8\",n=this.length,e=0;else if(void 0===n&&\"string\"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");e|=0,isFinite(n)?(n|=0,void 0===r&&(r=\"utf8\")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");r||(r=\"utf8\");for(var o=!1;;)switch(r){case\"hex\":return v(this,t,e,n);case\"utf8\":case\"utf-8\":return _(this,t,e,n);case\"ascii\":return b(this,t,e,n);case\"latin1\":case\"binary\":return w(this,t,e,n);case\"base64\":return S(this,t,e,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return E(this,t,e,n);default:if(o)throw new TypeError(\"Unknown encoding: \"+r);r=(\"\"+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function k(t,e,n){var r=\"\";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function M(t,e,n){var r=\"\";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i=\"\",o=e;o<n;++o)i+=j(t[o]);return i}function P(t,e,n){for(var r=t.slice(e,n),i=\"\",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(t,e,n){if(t%1!==0||t<0)throw new RangeError(\"offset is not uint\");if(t+e>n)throw new RangeError(\"Trying to access beyond buffer length\")}function R(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('\"value\" argument is out of bounds');if(n+r>t.length)throw new RangeError(\"Index out of range\")}function x(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function U(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError(\"Index out of range\");if(n<0)throw new RangeError(\"Index out of range\")}function N(t,e,n,r,o){return o||U(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,o){return o||U(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):x(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):x(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):x(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):x(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError(\"targetStart out of bounds\");if(n<0||n>=this.length)throw new RangeError(\"sourceStart out of bounds\");if(r<0)throw new RangeError(\"sourceEnd out of bounds\");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if(\"string\"===typeof t){if(\"string\"===typeof e?(r=e,e=0,n=this.length):\"string\"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&\"string\"!==typeof r)throw new TypeError(\"encoding must be a string\");if(\"string\"===typeof r&&!u.isEncoding(r))throw new TypeError(\"Unknown encoding: \"+r)}else\"number\"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError(\"Out of range index\");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),\"number\"===typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:q(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var B=/[^+\\/0-9A-Za-z-_]/g;function j(t){return t<16?\"0\"+t.toString(16):t.toString(16)}function q(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error(\"Invalid code point\");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\\s+|\\s+$/g,\"\")}(t).replace(B,\"\")).length<2)return\"\";for(;t.length%4!==0;)t+=\"=\";return t}(t))}function Y(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(29))},function(t,e,n){\"use strict\";var r,i=n(32),o=(r=i)&&r.__esModule?r:{default:r},s=n(0);var a=void 0,u=(s.bridge,s.bridge),c=n(43),h=(setTimeout,clearTimeout,!1),f=[];function l(t){console.log(\"send msg:\",\"undefined\"===typeof t?\"undefined\":(0,o.default)(t)),console.log(t),h?u.sendSocketMessage({data:t}):f.push(t)}a={URL:\"\"};var d={setTimeout:setTimeout,clearTimeout:clearTimeout,WebSocket:function(t){console.log(\"call window WebSocket\",arguments);var e={send:l,close:u.closeSocket,onopen:null,onmessage:null,onclose:null,onerror:null};return u.connectSocket({url:t}),u.onSocketOpen(function(t){console.log(\"\\u6536\\u5230onopen\\u4e8b\\u4ef6:\",arguments),h=!0;for(var n=0;n<f.length;n++)l(f[n]);f=[],e.onopen&&e.onopen.apply(e,arguments)}),u.onSocketMessage(function(t){console.log(\"\\u6536\\u5230onmessage\\u4e8b\\u4ef6:\",arguments),console.log(t.data),e.onmessage&&e.onmessage.apply(e,arguments)}),u.onSocketClose(function(){console.log(\"\\u6536\\u5230onclose\\u4e8b\\u4ef6:\",arguments),e.onclose&&e.onclose.apply(e,arguments)}),u.onSocketError(function(){console.log(\"\\u6536\\u5230onerror\\u4e8b\\u4ef6:\",arguments),e.onerror&&e.onerror.apply(e,arguments)}),e}};t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=43)}([function(t,e){var n,r,i=t.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function s(){throw new Error(\"clearTimeout has not been defined\")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n=\"function\"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r=\"function\"===typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],h=!1,f=-1;function l(){h&&u&&(h=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!h){var t=a(l);h=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||h||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title=\"browser\",i.browser=!0,i.env={},i.argv=[],i.version=\"\",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error(\"process.binding is not supported\")},i.cwd=function(){return\"/\"},i.chdir=function(t){throw new Error(\"process.chdir is not supported\")},i.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(t){\"object\"===(\"undefined\"===typeof d?\"undefined\":(0,o.default)(d))&&(n=d)}t.exports=n},function(t,e){\"function\"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){var r=n(9),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),o(i,s),s.from=function(t,e,n){if(\"number\"===typeof t)throw new TypeError(\"Argument must not be a number\");return i(t,e,n)},s.alloc=function(t,e,n){if(\"number\"!==typeof t)throw new TypeError(\"Argument must be a number\");var r=i(t);return void 0!==e?\"string\"===typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if(\"number\"!==typeof t)throw new TypeError(\"Argument must be a number\");return i(t)},s.allocUnsafeSlow=function(t){if(\"number\"!==typeof t)throw new TypeError(\"Argument must be a number\");return r.SlowBuffer(t)}},function(t,e,n){var r=n(8),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=f;var o=n(7);o.inherits=n(2);var s=n(21),a=n(23);o.inherits(f,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var h=u[c];f.prototype[h]||(f.prototype[h]=a.prototype[h])}function f(t){if(!(this instanceof f))return new f(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once(\"end\",l)}function l(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(f.prototype,\"writableHighWaterMark\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,\"destroyed\",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),f.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){var r=n(63);t.exports=function(t,e){var n;function i(r){e.rejectUnauthorized&&t.emit(\"error\",r),n.end()}return e.port=e.port||8883,e.host=e.hostname||e.host||\"localhost\",e.rejectUnauthorized=!1!==e.rejectUnauthorized,delete e.path,(n=r.connect(e)).on(\"secureConnect\",function(){e.rejectUnauthorized&&!n.authorized?n.emit(\"error\",new Error(\"TLS not authorized\")):n.removeListener(\"error\",i)}),n.on(\"error\",i),n}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return\"function\"===typeof t}function i(t){return\"object\"===(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(\"number\"!==typeof t||t<0||isNaN(t))throw TypeError(\"n must be a positive number\");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,a,u,c;if(this._events||(this._events={}),\"error\"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var h=new Error('Uncaught, unspecified \"error\" event. ('+e+\")\");throw h.context=e,h}if(s(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),o=(c=n.slice()).length,u=0;u<o;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError(\"listener must be a function\");return this._events||(this._events={}),this._events.newListener&&this.emit(\"newListener\",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error(\"(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.\",this._events[t].length),\"function\"===typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!r(e))throw TypeError(\"listener must be a function\");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,s,a;if(!r(e))throw TypeError(\"listener must be a function\");if(!this._events||!this._events[t])return this;if(s=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit(\"removeListener\",t,e);else if(i(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit(\"removeListener\",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)\"removeListener\"!==e&&this.removeAllListeners(e);return this.removeAllListeners(\"removeListener\"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):\"[object Array]\"===n(t)},e.isBoolean=function(t){return\"boolean\"===typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return\"number\"===typeof t},e.isString=function(t){return\"string\"===typeof t},e.isSymbol=function(t){return\"symbol\"===(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return\"[object RegExp]\"===n(t)},e.isObject=function(t){return\"object\"===(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))&&null!==t},e.isDate=function(t){return\"[object Date]\"===n(t)},e.isError=function(t){return\"[object Error]\"===n(t)||t instanceof Error},e.isFunction=function(t){return\"function\"===typeof t},e.isPrimitive=function(t){return null===t||\"boolean\"===typeof t||\"number\"===typeof t||\"string\"===typeof t||\"symbol\"===(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))||\"undefined\"===typeof t},e.isBuffer=t.isBuffer}).call(e,n(9).Buffer)},function(t,e,n){(function(e){!e.version||0===e.version.indexOf(\"v0.\")||0===e.version.indexOf(\"v1.\")&&0!==e.version.indexOf(\"v1.8.\")?t.exports={nextTick:function(t,n,r,i){if(\"function\"!==typeof t)throw new TypeError('\"callback\" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}}:t.exports=e}).call(e,n(0))},function(t,e,n){(function(t){var r=n(29),i=n(30),o=n(32);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError(\"Invalid typed array length\");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if(\"number\"===typeof t){if(\"string\"===typeof e)throw new Error(\"If encoding is specified then the first argument must be a string\");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if(\"number\"===typeof e)throw new TypeError('\"value\" argument must not be a number');return\"undefined\"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError(\"'offset' is out of bounds\");if(e.byteLength<n+(r||0))throw new RangeError(\"'length' is out of bounds\");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=l(t,e);return t}(t,e,n,r):\"string\"===typeof e?function(t,e,n){\"string\"===typeof n&&\"\"!==n||(n=\"utf8\");if(!u.isEncoding(n))throw new TypeError('\"encoding\" must be a valid string encoding');var r=0|p(e,n),i=(t=a(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if(\"undefined\"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||\"length\"in e)return\"number\"!==typeof e.length||(r=e.length)!==r?a(t,0):l(t,e);if(\"Buffer\"===e.type&&o(e.data))return l(t,e.data)}var r;throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\")}(t,e)}function h(t){if(\"number\"!==typeof t)throw new TypeError('\"size\" argument must be a number');if(t<0)throw new RangeError('\"size\" argument must not be negative')}function f(t,e){if(h(e),t=a(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e){var n=e.length<0?0:0|d(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=s())throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+s().toString(16)+\" bytes\");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if(\"undefined\"!==typeof ArrayBuffer&&\"function\"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;\"string\"!==typeof t&&(t=\"\"+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case\"ascii\":case\"latin1\":case\"binary\":return n;case\"utf8\":case\"utf-8\":case void 0:return q(t).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*n;case\"hex\":return n>>>1;case\"base64\":return F(t).length;default:if(r)return q(t).length;e=(\"\"+e).toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if(\"string\"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if(\"string\"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if(\"number\"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&\"function\"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError(\"val must be string, number or Buffer\")}function m(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&(\"ucs2\"===(r=String(r).toLowerCase())||\"ucs-2\"===r||\"utf16le\"===r||\"utf-16le\"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var f=!0,l=0;l<u;l++)if(c(t,o+l)!==c(e,l)){f=!1;break}if(f)return o}return-1}function v(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!==0)throw new TypeError(\"Invalid hex string\");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function _(t,e,n,r){return Y(q(e,t.length-n),t,n,r)}function b(t,e,n,r){return Y(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return b(t,e,n,r)}function S(t,e,n,r){return Y(F(e),t,n,r)}function E(t,e,n,r){return Y(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],h=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(h=c);break;case 2:128===(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(h=u);break;case 3:o=t[i+1],s=t[i+2],128===(192&o)&&128===(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(h=u)}null===h?(h=65533,f=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=f}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var n=\"\",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&\"function\"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,\"undefined\"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return h(e),e<=0?a(t,e):void 0!==n?\"string\"===typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError(\"Arguments must be Buffers\");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('\"list\" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?\"\":0===arguments.length?T(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return\"\";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return\"\";if((n>>>=0)<=(e>>>=0))return\"\";for(t||(t=\"utf8\");;)switch(t){case\"hex\":return C(this,e,n);case\"utf8\":case\"utf-8\":return T(this,e,n);case\"ascii\":return k(this,e,n);case\"latin1\":case\"binary\":return M(this,e,n);case\"base64\":return I(this,e,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return P(this,e,n);default:if(r)throw new TypeError(\"Unknown encoding: \"+t);t=(t+\"\").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError(\"Argument must be a Buffer\");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t=\"\",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString(\"hex\",0,n).match(/.{2}/g).join(\" \"),this.length>n&&(t+=\" ... \")),\"<Buffer \"+t+\">\"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError(\"Argument must be a Buffer\");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError(\"out of range index\");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,a=Math.min(o,s),c=this.slice(r,i),h=t.slice(e,n),f=0;f<a;++f)if(c[f]!==h[f]){o=c[f],s=h[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r=\"utf8\",n=this.length,e=0;else if(void 0===n&&\"string\"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");e|=0,isFinite(n)?(n|=0,void 0===r&&(r=\"utf8\")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");r||(r=\"utf8\");for(var o=!1;;)switch(r){case\"hex\":return v(this,t,e,n);case\"utf8\":case\"utf-8\":return _(this,t,e,n);case\"ascii\":return b(this,t,e,n);case\"latin1\":case\"binary\":return w(this,t,e,n);case\"base64\":return S(this,t,e,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return E(this,t,e,n);default:if(o)throw new TypeError(\"Unknown encoding: \"+r);r=(\"\"+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function k(t,e,n){var r=\"\";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function M(t,e,n){var r=\"\";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i=\"\",o=e;o<n;++o)i+=j(t[o]);return i}function P(t,e,n){for(var r=t.slice(e,n),i=\"\",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(t,e,n){if(t%1!==0||t<0)throw new RangeError(\"offset is not uint\");if(t+e>n)throw new RangeError(\"Trying to access beyond buffer length\")}function R(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('\"value\" argument is out of bounds');if(n+r>t.length)throw new RangeError(\"Index out of range\")}function x(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function U(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError(\"Index out of range\");if(n<0)throw new RangeError(\"Index out of range\")}function N(t,e,n,r,o){return o||U(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,o){return o||U(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):x(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):x(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):x(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):x(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError(\"targetStart out of bounds\");if(n<0||n>=this.length)throw new RangeError(\"sourceStart out of bounds\");if(r<0)throw new RangeError(\"sourceEnd out of bounds\");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if(\"string\"===typeof t){if(\"string\"===typeof e?(r=e,e=0,n=this.length):\"string\"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&\"string\"!==typeof r)throw new TypeError(\"encoding must be a string\");if(\"string\"===typeof r&&!u.isEncoding(r))throw new TypeError(\"Unknown encoding: \"+r)}else\"number\"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError(\"Out of range index\");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),\"number\"===typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:q(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var B=/[^+\\/0-9A-Za-z-_]/g;function j(t){return t<16?\"0\"+t.toString(16):t.toString(16)}function q(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error(\"Invalid code point\");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\\s+|\\s+$/g,\"\")}(t).replace(B,\"\")).length<2)return\"\";for(;t.length%4!==0;)t+=\"=\";return t}(t))}function Y(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(e,n(1))},function(t,e,n){(e=t.exports=n(21)).Stream=e,e.Readable=e,e.Writable=n(23),e.Duplex=n(4),e.Transform=n(22),e.PassThrough=n(55)},function(t,e,n){var r=n(33),i=n(40);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=b,e.resolve=function(t,e){return b(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=b(t));return t instanceof s?t.format():s.prototype.format.call(t)},e.Url=s;var a=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,c=/^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,h=[\"{\",\"}\",\"|\",\"\\\\\",\"^\",\"`\"].concat([\"<\",\">\",'\"',\"`\",\" \",\"\\r\",\"\\n\",\"\\t\"]),f=[\"'\"].concat(h),l=[\"%\",\"/\",\"?\",\";\",\"#\"].concat(f),d=[\"/\",\"?\",\"#\"],p=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,\"javascript:\":!0},m={javascript:!0,\"javascript:\":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,\"http:\":!0,\"https:\":!0,\"ftp:\":!0,\"gopher:\":!0,\"file:\":!0},_=n(36);function b(t,e,n){if(t&&i.isObject(t)&&t instanceof s)return t;var r=new s;return r.parse(t,e,n),r}s.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError(\"Parameter 'url' must be a string, not \"+(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t)));var s=t.indexOf(\"?\"),u=-1!==s&&s<t.indexOf(\"#\")?\"?\":\"#\",h=t.split(u);h[0]=h[0].replace(/\\\\/g,\"/\");var b=t=h.join(u);if(b=b.trim(),!n&&1===t.split(\"#\").length){var w=c.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search=\"\",this.query={}),this}var S=a.exec(b);if(S){var E=(S=S[0]).toLowerCase();this.protocol=E,b=b.substr(S.length)}if(n||S||b.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)){var I=\"//\"===b.substr(0,2);!I||S&&m[S]||(b=b.substr(2),this.slashes=!0)}if(!m[S]&&(I||S&&!v[S])){for(var T,A,k=-1,M=0;M<d.length;M++){-1!==(C=b.indexOf(d[M]))&&(-1===k||C<k)&&(k=C)}-1!==(A=-1===k?b.lastIndexOf(\"@\"):b.lastIndexOf(\"@\",k))&&(T=b.slice(0,A),b=b.slice(A+1),this.auth=decodeURIComponent(T)),k=-1;for(M=0;M<l.length;M++){var C;-1!==(C=b.indexOf(l[M]))&&(-1===k||C<k)&&(k=C)}-1===k&&(k=b.length),this.host=b.slice(0,k),b=b.slice(k),this.parseHost(),this.hostname=this.hostname||\"\";var P=\"[\"===this.hostname[0]&&\"]\"===this.hostname[this.hostname.length-1];if(!P)for(var O=this.hostname.split(/\\./),R=(M=0,O.length);M<R;M++){var x=O[M];if(x&&!x.match(p)){for(var L=\"\",U=0,N=x.length;U<N;U++)x.charCodeAt(U)>127?L+=\"x\":L+=x[U];if(!L.match(p)){var D=O.slice(0,M),B=O.slice(M+1),j=x.match(g);j&&(D.push(j[1]),B.unshift(j[2])),B.length&&(b=\"/\"+B.join(\".\")+b),this.hostname=D.join(\".\");break}}}this.hostname.length>255?this.hostname=\"\":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=r.toASCII(this.hostname));var q=this.port?\":\"+this.port:\"\",F=this.hostname||\"\";this.host=F+q,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),\"/\"!==b[0]&&(b=\"/\"+b))}if(!y[E])for(M=0,R=f.length;M<R;M++){var Y=f[M];if(-1!==b.indexOf(Y)){var W=encodeURIComponent(Y);W===Y&&(W=escape(Y)),b=b.split(Y).join(W)}}var V=b.indexOf(\"#\");-1!==V&&(this.hash=b.substr(V),b=b.slice(0,V));var K=b.indexOf(\"?\");if(-1!==K?(this.search=b.substr(K),this.query=b.substr(K+1),e&&(this.query=_.parse(this.query)),b=b.slice(0,K)):e&&(this.search=\"\",this.query={}),b&&(this.pathname=b),v[E]&&this.hostname&&!this.pathname&&(this.pathname=\"/\"),this.pathname||this.search){q=this.pathname||\"\";var H=this.search||\"\";this.path=q+H}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||\"\";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,\":\"),t+=\"@\");var e=this.protocol||\"\",n=this.pathname||\"\",r=this.hash||\"\",o=!1,s=\"\";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(\":\")?this.hostname:\"[\"+this.hostname+\"]\"),this.port&&(o+=\":\"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=_.stringify(this.query));var a=this.search||s&&\"?\"+s||\"\";return e&&\":\"!==e.substr(-1)&&(e+=\":\"),this.slashes||(!e||v[e])&&!1!==o?(o=\"//\"+(o||\"\"),n&&\"/\"!==n.charAt(0)&&(n=\"/\"+n)):o||(o=\"\"),r&&\"#\"!==r.charAt(0)&&(r=\"#\"+r),a&&\"?\"!==a.charAt(0)&&(a=\"?\"+a),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace(\"#\",\"%23\"))+r},s.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(i.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var n=new s,r=Object.keys(this),o=0;o<r.length;o++){var a=r[o];n[a]=this[a]}if(n.hash=t.hash,\"\"===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var h=u[c];\"protocol\"!==h&&(n[h]=t[h])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname=\"/\"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var f=Object.keys(t),l=0;l<f.length;l++){var d=f[l];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||m[t.protocol])n.pathname=t.pathname;else{for(var p=(t.pathname||\"\").split(\"/\");p.length&&!(t.host=p.shift()););t.host||(t.host=\"\"),t.hostname||(t.hostname=\"\"),\"\"!==p[0]&&p.unshift(\"\"),p.length<2&&p.unshift(\"\"),n.pathname=p.join(\"/\")}if(n.search=t.search,n.query=t.query,n.host=t.host||\"\",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var g=n.pathname||\"\",y=n.search||\"\";n.path=g+y}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var _=n.pathname&&\"/\"===n.pathname.charAt(0),b=t.host||t.pathname&&\"/\"===t.pathname.charAt(0),w=b||_||n.host&&t.pathname,S=w,E=n.pathname&&n.pathname.split(\"/\")||[],I=(p=t.pathname&&t.pathname.split(\"/\")||[],n.protocol&&!v[n.protocol]);if(I&&(n.hostname=\"\",n.port=null,n.host&&(\"\"===E[0]?E[0]=n.host:E.unshift(n.host)),n.host=\"\",t.protocol&&(t.hostname=null,t.port=null,t.host&&(\"\"===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),w=w&&(\"\"===p[0]||\"\"===E[0])),b)n.host=t.host||\"\"===t.host?t.host:n.host,n.hostname=t.hostname||\"\"===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(I)n.hostname=n.host=E.shift(),(C=!!(n.host&&n.host.indexOf(\"@\")>0)&&n.host.split(\"@\"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:\"\")+(n.search?n.search:\"\")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path=\"/\"+n.search:n.path=null,n.href=n.format(),n;for(var T=E.slice(-1)[0],A=(n.host||t.host||E.length>1)&&(\".\"===T||\"..\"===T)||\"\"===T,k=0,M=E.length;M>=0;M--)\".\"===(T=E[M])?E.splice(M,1):\"..\"===T?(E.splice(M,1),k++):k&&(E.splice(M,1),k--);if(!w&&!S)for(;k--;k)E.unshift(\"..\");!w||\"\"===E[0]||E[0]&&\"/\"===E[0].charAt(0)||E.unshift(\"\"),A&&\"/\"!==E.join(\"/\").substr(-1)&&E.push(\"\");var C,P=\"\"===E[0]||E[0]&&\"/\"===E[0].charAt(0);I&&(n.hostname=n.host=P?\"\":E.length?E.shift():\"\",(C=!!(n.host&&n.host.indexOf(\"@\")>0)&&n.host.split(\"@\"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift()));return(w=w||n.host&&E.length)&&!P&&E.unshift(\"\"),E.length?n.pathname=E.join(\"/\"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:\"\")+(n.search?n.search:\"\")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},s.prototype.parseHost=function(){var t=this.host,e=u.exec(t);e&&(\":\"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},function(t,e,n){var r=n(62);t.exports=function(t,e){var n,i;return e.port=e.port||1883,e.hostname=e.hostname||e.host||\"localhost\",n=e.port,i=e.hostname,r.createConnection(n,i)}},function(t,e,n){(function(e){var r=n(26),i=n(11),o=[\"rejectUnauthorized\",\"ca\",\"cert\",\"key\",\"pfx\",\"passphrase\"],s=\"browser\"===e.title;function u(t,e){var n=\"MQIsdp\"===e.protocolId&&3===e.protocolVersion?\"mqttv3.1\":\"mqtt\";!function(t){t.hostname||(t.hostname=\"localhost\"),t.port||(\"wss\"===t.protocol?t.port=443:t.port=80),t.path||(t.path=\"/\"),t.wsOptions||(t.wsOptions={}),s||\"wss\"!==t.protocol||o.forEach(function(e){t.hasOwnProperty(e)&&!t.wsOptions.hasOwnProperty(e)&&(t.wsOptions[e]=t[e])})}(e);var i=function(t,e){var n=t.protocol+\"://\"+t.hostname+\":\"+t.port+t.path;return\"function\"===typeof t.transformWsUrl&&(n=t.transformWsUrl(n,t,e)),n}(e,t);return r(i,[n],e.wsOptions)}t.exports=s?function(t,e){if(e.hostname||(e.hostname=e.host),!e.hostname){if(\"undefined\"===typeof a)throw new Error(\"Could not determine host. Specify host manually.\");var n=i.parse(a.URL);e.hostname=n.hostname,e.port||(e.port=n.port)}return u(t,e)}:function(t,e){return u(t,e)}}).call(e,n(0))},function(t,e,n){var r=!1,i=[];function o(t){r?u.sendSocketMessage({data:t.buffer||t}):i.push(t)}var s=n(26),c=n(11);function h(t,e){var n=\"MQIsdp\"===e.protocolId&&3===e.protocolVersion?\"mqttv3.1\":\"mqtt\";!function(t){t.hostname||(t.hostname=\"localhost\"),t.path||(t.path=\"/\"),t.wsOptions||(t.wsOptions={})}(e);var a=function(t,e){var n=\"mys\"===t.protocol?\"wss\":\"ws\",r=n+\"://\"+t.hostname+t.path;return t.port&&80!==t.port&&443!==t.port&&(r=n+\"://\"+t.hostname+\":\"+t.port+t.path),\"function\"===typeof t.transformWsUrl&&(r=t.transformWsUrl(r,t,e)),r}(e,t);return s(function(t,e){var n={OPEN:1,CLOSING:2,CLOSED:3,readyState:r?1:0,send:o,close:u.closeSocket,onopen:null,onmessage:null,onclose:null,onerror:null};return u.connectSocket({url:t,protocols:e}),u.onSocketOpen(function(t){n.readyState=n.OPEN,r=!0;for(var e=0;e<i.length;e++)o(i[e]);i=[],n.onopen&&n.onopen.apply(n,arguments)}),u.onSocketMessage(function(t){n.onmessage&&n.onmessage.apply(n,arguments)}),u.onSocketClose(function(){n.onclose&&n.onclose.apply(n,arguments),n.readyState=n.CLOSED,r=!1}),u.onSocketError(function(){n.onerror&&n.onerror.apply(n,arguments),n.readyState=n.CLOSED,r=!1}),n}(a,[n]))}t.exports=function(t,e){if(e.hostname||(e.hostname=e.host),!e.hostname){if(\"undefined\"===typeof a)throw new Error(\"Could not determine host. Specify host manually.\");var n=c.parse(a.URL);e.hostname=n.hostname,e.port||(e.port=n.port)}return h(t,e)}},function(t,e,n){(function(e){var r=n(12),i=n(10).Readable,o={objectMode:!0},s={clean:!0};function a(t){if(!(this instanceof a))return new a(t);this.options=t||{},this.options=r(s,t),this._inflights={}}a.prototype.put=function(t,e){return this._inflights[t.messageId]=t,e&&e(),this},a.prototype.createStream=function(){var t=new i(o),n=this._inflights,r=Object.keys(this._inflights),s=!1,a=0;return t._read=function(){!s&&a<r.length?this.push(n[r[a++]]):this.push(null)},t.destroy=function(){if(!s){var t=this;s=!0,e.nextTick(function(){t.emit(\"close\")})}},t},a.prototype.del=function(t,e){return(t=this._inflights[t.messageId])?(delete this._inflights[t.messageId],e(null,t)):e&&e(new Error(\"missing packet\")),this},a.prototype.get=function(t,e){return(t=this._inflights[t.messageId])?e(null,t):e&&e(new Error(\"missing packet\")),this},a.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},t.exports=a}).call(e,n(0))},function(t,e,n){var r=n(37).Buffer,i=r.isEncoding||function(t){switch((t=\"\"+t)&&t.toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":case\"raw\":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return\"utf8\";for(var e;;)switch(t){case\"utf8\":case\"utf-8\":return\"utf8\";case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return\"utf16le\";case\"latin1\":case\"binary\":return\"latin1\";case\"base64\":case\"ascii\":case\"hex\":return t;default:if(e)return;t=(\"\"+t).toLowerCase(),e=!0}}(t);if(\"string\"!==typeof e&&(r.isEncoding===i||!i(t)))throw new Error(\"Unknown encoding: \"+t);return e||t}(t),this.encoding){case\"utf16le\":this.text=u,this.end=c,e=4;break;case\"utf8\":this.fillLast=a,e=4;break;case\"base64\":this.text=h,this.end=f,e=3;break;default:return this.write=l,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!==(192&e[0]))return t.lastNeed=0,\"\\ufffd\";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,\"\\ufffd\";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,\"\\ufffd\"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2===0){var n=t.toString(\"utf16le\",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString(\"utf16le\",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):\"\";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString(\"utf16le\",0,n)}return e}function h(t,e){var n=(t.length-e)%3;return 0===n?t.toString(\"base64\",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString(\"base64\",e,t.length-n))}function f(t){var e=t&&t.length?this.write(t):\"\";return this.lastNeed?e+this.lastChar.toString(\"base64\",0,3-this.lastNeed):e}function l(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):\"\"}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return\"\";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return\"\";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||\"\"},o.prototype.end=function(t){var e=t&&t.length?this.write(t):\"\";return this.lastNeed?e+\"\\ufffd\":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString(\"utf8\",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString(\"utf8\",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){var r=n(53),i=function(){};t.exports=function t(e,n,o){if(\"function\"===typeof n)return t(e,null,n);n||(n={}),o=r(o||i);var s=e._writableState,a=e._readableState,u=n.readable||!1!==n.readable&&e.readable,c=n.writable||!1!==n.writable&&e.writable,h=function(){e.writable||f()},f=function(){c=!1,u||o.call(e)},l=function(){u=!1,c||o.call(e)},d=function(t){o.call(e,t?new Error(\"exited with error code: \"+t):null)},p=function(t){o.call(e,t)},g=function(){return(!u||a&&a.ended)&&(!c||s&&s.ended)?void 0:o.call(e,new Error(\"premature close\"))},y=function(){e.req.on(\"finish\",f)};return function(t){return t.setHeader&&\"function\"===typeof t.abort}(e)?(e.on(\"complete\",f),e.on(\"abort\",g),e.req?y():e.on(\"request\",y)):c&&!s&&(e.on(\"end\",h),e.on(\"close\",h)),function(t){return t.stdio&&Array.isArray(t.stdio)&&3===t.stdio.length}(e)&&e.on(\"exit\",d),e.on(\"end\",l),e.on(\"finish\",f),!1!==n.error&&e.on(\"error\",p),e.on(\"close\",g),function(){e.removeListener(\"complete\",f),e.removeListener(\"abort\",g),e.removeListener(\"request\",y),e.req&&e.req.removeListener(\"finish\",f),e.removeListener(\"end\",h),e.removeListener(\"close\",h),e.removeListener(\"finish\",f),e.removeListener(\"exit\",d),e.removeListener(\"end\",l),e.removeListener(\"error\",p),e.removeListener(\"close\",g)}}},function(t,e,n){var r=n(3).Buffer,i=t.exports;for(var o in i.types={0:\"reserved\",1:\"connect\",2:\"connack\",3:\"publish\",4:\"puback\",5:\"pubrec\",6:\"pubrel\",7:\"pubcomp\",8:\"subscribe\",9:\"suback\",10:\"unsubscribe\",11:\"unsuback\",12:\"pingreq\",13:\"pingresp\",14:\"disconnect\",15:\"reserved\"},i.codes={},i.types){var s=i.types[o];i.codes[s]=o}function a(t){return[0,1,2].map(function(e){return[0,1].map(function(n){return[0,1].map(function(o){var s=new r(1);return s.writeUInt8(i.codes[t]<<i.CMD_SHIFT|(n?i.DUP_MASK:0)|e<<i.QOS_SHIFT|o,0,!0),s})})})}i.CMD_SHIFT=4,i.CMD_MASK=240,i.DUP_MASK=8,i.QOS_MASK=3,i.QOS_SHIFT=1,i.RETAIN_MASK=1,i.LENGTH_MASK=127,i.LENGTH_FIN_MASK=128,i.SESSIONPRESENT_MASK=1,i.SESSIONPRESENT_HEADER=r.from([i.SESSIONPRESENT_MASK]),i.CONNACK_HEADER=r.from([i.codes.connack<<i.CMD_SHIFT]),i.USERNAME_MASK=128,i.PASSWORD_MASK=64,i.WILL_RETAIN_MASK=32,i.WILL_QOS_MASK=24,i.WILL_QOS_SHIFT=3,i.WILL_FLAG_MASK=4,i.CLEAN_SESSION_MASK=2,i.CONNECT_HEADER=r.from([i.codes.connect<<i.CMD_SHIFT]),i.PUBLISH_HEADER=a(\"publish\"),i.SUBSCRIBE_HEADER=a(\"subscribe\"),i.UNSUBSCRIBE_HEADER=a(\"unsubscribe\"),i.ACKS={unsuback:a(\"unsuback\"),puback:a(\"puback\"),pubcomp:a(\"pubcomp\"),pubrel:a(\"pubrel\"),pubrec:a(\"pubrec\")},i.SUBACK_HEADER=r.from([i.codes.suback<<i.CMD_SHIFT]),i.VERSION3=r.from([3]),i.VERSION4=r.from([4]),i.QOS=[0,1,2].map(function(t){return r.from([t])}),i.EMPTY={pingreq:r.from([i.codes.pingreq<<4,0]),pingresp:r.from([i.codes.pingresp<<4,0]),disconnect:r.from([i.codes.disconnect<<4,0])}},function(t,e,n){var r=n(19),i=n(3).Buffer,s=i.allocUnsafe(0),a=i.from([0]),u=n(50),c=n(8).nextTick,h=u.cache,f=u.generateNumber,l=u.generateCache,d=b,p=!0;function g(t,e){switch(e.cork&&(e.cork(),c(y,e)),p&&(p=!1,l()),t.cmd){case\"connect\":return function(t,e){var n=t||{},s=n.protocolId||\"MQTT\",a=n.protocolVersion||4,u=n.will,c=n.clean,h=n.keepalive||0,f=n.clientId||\"\",l=n.username,p=n.password;void 0===c&&(c=!0);var g=0;if(!s||\"string\"!==typeof s&&!i.isBuffer(s))return e.emit(\"error\",new Error(\"Invalid protocolId\")),!1;g+=s.length+2;if(3!==a&&4!==a)return e.emit(\"error\",new Error(\"Invalid protocol version\")),!1;g+=1;if(\"string\"!==typeof f&&!i.isBuffer(f)||!f&&4!==a||!f&&!c){if(a<4)return e.emit(\"error\",new Error(\"clientId must be supplied before 3.1.1\")),!1;if(1*c===0)return e.emit(\"error\",new Error(\"clientId must be given if cleanSession set to 0\")),!1}else g+=f.length+2;if(\"number\"!==typeof h||h<0||h>65535||h%1!==0)return e.emit(\"error\",new Error(\"Invalid keepalive\")),!1;g+=2;if(g+=1,u){if(\"object\"!==(\"undefined\"===typeof u?\"undefined\":(0,o.default)(u)))return e.emit(\"error\",new Error(\"Invalid will\")),!1;if(!u.topic||\"string\"!==typeof u.topic)return e.emit(\"error\",new Error(\"Invalid will topic\")),!1;if(g+=i.byteLength(u.topic)+2,u.payload&&u.payload){if(!(u.payload.length>=0))return e.emit(\"error\",new Error(\"Invalid will payload\")),!1;\"string\"===typeof u.payload?g+=i.byteLength(u.payload)+2:g+=u.payload.length+2}else g+=2}var y=!1;if(null!=l){if(!I(l))return e.emit(\"error\",new Error(\"Invalid username\")),!1;y=!0,g+=i.byteLength(l)+2}if(null!=p){if(!y)return e.emit(\"error\",new Error(\"Username is required to use password\")),!1;if(!I(p))return e.emit(\"error\",new Error(\"Invalid password\")),!1;g+=E(p)+2}e.write(r.CONNECT_HEADER),v(e,g),S(e,s),e.write(4===a?r.VERSION4:r.VERSION3);var m=0;m|=null!=l?r.USERNAME_MASK:0,m|=null!=p?r.PASSWORD_MASK:0,m|=u&&u.retain?r.WILL_RETAIN_MASK:0,m|=u&&u.qos?u.qos<<r.WILL_QOS_SHIFT:0,m|=u?r.WILL_FLAG_MASK:0,m|=c?r.CLEAN_SESSION_MASK:0,e.write(i.from([m])),d(e,h),S(e,f),u&&(_(e,u.topic),S(e,u.payload));null!=l&&S(e,l);null!=p&&S(e,p);return!0}(t,e);case\"connack\":return function(t,e){var n=(t||{}).returnCode;if(\"number\"!==typeof n)return e.emit(\"error\",new Error(\"Invalid return code\")),!1;return e.write(r.CONNACK_HEADER),v(e,2),e.write(t.sessionPresent?r.SESSIONPRESENT_HEADER:a),e.write(i.from([n]))}(t,e);case\"publish\":return function(t,e){var n=t||{},o=n.qos||0,a=n.retain?r.RETAIN_MASK:0,u=n.topic,c=n.payload||s,h=n.messageId,f=0;if(\"string\"===typeof u)f+=i.byteLength(u)+2;else{if(!i.isBuffer(u))return e.emit(\"error\",new Error(\"Invalid topic\")),!1;f+=u.length+2}i.isBuffer(c)?f+=c.length:f+=i.byteLength(c);if(o&&\"number\"!==typeof h)return e.emit(\"error\",new Error(\"Invalid messageId\")),!1;o&&(f+=2);e.write(r.PUBLISH_HEADER[o][t.dup?1:0][a?1:0]),v(e,f),d(e,E(u)),e.write(u),o>0&&d(e,h);return e.write(c)}(t,e);case\"puback\":case\"pubrec\":case\"pubrel\":case\"pubcomp\":case\"unsuback\":return function(t,e){var n=t||{},i=n.cmd||\"puback\",o=n.messageId,s=n.dup&&\"pubrel\"===i?r.DUP_MASK:0,a=0;\"pubrel\"===i&&(a=1);if(\"number\"!==typeof o)return e.emit(\"error\",new Error(\"Invalid messageId\")),!1;return e.write(r.ACKS[i][a][s][0]),v(e,2),d(e,o)}(t,e);case\"subscribe\":return function(t,e){var n=t||{},s=n.dup?r.DUP_MASK:0,a=n.messageId,u=n.subscriptions,c=0;if(\"number\"!==typeof a)return e.emit(\"error\",new Error(\"Invalid messageId\")),!1;c+=2;if(\"object\"!==(\"undefined\"===typeof u?\"undefined\":(0,o.default)(u))||!u.length)return e.emit(\"error\",new Error(\"Invalid subscriptions\")),!1;for(var h=0;h<u.length;h+=1){var f=u[h].topic,l=u[h].qos;if(\"string\"!==typeof f)return e.emit(\"error\",new Error(\"Invalid subscriptions - invalid topic\")),!1;if(\"number\"!==typeof l)return e.emit(\"error\",new Error(\"Invalid subscriptions - invalid qos\")),!1;c+=i.byteLength(f)+2+1}e.write(r.SUBSCRIBE_HEADER[1][s?1:0][0]),v(e,c),d(e,a);for(var p=!0,g=0;g<u.length;g++){var y=u[g],m=y.topic,b=y.qos;_(e,m),p=e.write(r.QOS[b])}return p}(t,e);case\"suback\":return function(t,e){var n=t||{},s=n.messageId,a=n.granted,u=0;if(\"number\"!==typeof s)return e.emit(\"error\",new Error(\"Invalid messageId\")),!1;u+=2;if(\"object\"!==(\"undefined\"===typeof a?\"undefined\":(0,o.default)(a))||!a.length)return e.emit(\"error\",new Error(\"Invalid qos vector\")),!1;for(var c=0;c<a.length;c+=1){if(\"number\"!==typeof a[c])return e.emit(\"error\",new Error(\"Invalid qos vector\")),!1;u+=1}return e.write(r.SUBACK_HEADER),v(e,u),d(e,s),e.write(i.from(a))}(t,e);case\"unsubscribe\":return function(t,e){var n=t||{},s=n.messageId,a=n.dup?r.DUP_MASK:0,u=n.unsubscriptions,c=0;if(\"number\"!==typeof s)return e.emit(\"error\",new Error(\"Invalid messageId\")),!1;c+=2;if(\"object\"!==(\"undefined\"===typeof u?\"undefined\":(0,o.default)(u))||!u.length)return e.emit(\"error\",new Error(\"Invalid unsubscriptions\")),!1;for(var h=0;h<u.length;h+=1){if(\"string\"!==typeof u[h])return e.emit(\"error\",new Error(\"Invalid unsubscriptions\")),!1;c+=i.byteLength(u[h])+2}e.write(r.UNSUBSCRIBE_HEADER[1][a?1:0][0]),v(e,c),d(e,s);for(var f=!0,l=0;l<u.length;l++)f=_(e,u[l]);return f}(t,e);case\"pingreq\":case\"pingresp\":case\"disconnect\":return function(t,e){return e.write(r.EMPTY[t.cmd])}(t,e);default:return e.emit(\"error\",new Error(\"Unknown command\")),!1}}function y(t){t.uncork()}Object.defineProperty(g,\"cacheNumbers\",{get:function(){return d===b},set:function(t){t?(h&&0!==Object.keys(h).length||(p=!0),d=b):(p=!1,d=w)}});var m={};function v(t,e){var n=m[e];n||(n=function(t){var e=0,n=0,r=i.allocUnsafe(function(t){return t>=0&&t<128?1:t>=128&&t<16384?2:t>=16384&&t<2097152?3:t>=2097152&&t<268435456?4:0}(t));do{e=t%128|0,(t=t/128|0)>0&&(e|=128),r.writeUInt8(e,n++)}while(t>0);return r}(e),e<16384&&(m[e]=n)),t.write(n)}function _(t,e){var n=i.byteLength(e);d(t,n),t.write(e,\"utf8\")}function b(t,e){return t.write(h[e])}function w(t,e){return t.write(f(e))}function S(t,e){\"string\"===typeof e?_(t,e):e?(d(t,e.length),t.write(e)):d(t,0)}function E(t){return t?t instanceof i?t.length:i.byteLength(t):0}function I(t){return\"string\"===typeof t||t instanceof i}t.exports=g},function(t,e,n){(function(e,r){var i=n(8);t.exports=_;var o,s=n(47);_.ReadableState=v;n(6).EventEmitter;var a=function(t,e){return t.listeners(e).length},u=n(25),c=n(3).Buffer,h=e.Uint8Array||function(){};var f=n(7);f.inherits=n(2);var l=n(64),d=void 0;d=l&&l.debuglog?l.debuglog(\"stream\"):function(){};var p,g=n(56),y=n(24);f.inherits(_,u);var m=[\"error\",\"close\",\"destroy\",\"pause\",\"resume\"];function v(t,e){o=o||n(4),t=t||{};var r=e instanceof o;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||\"utf8\",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(17).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function _(t){if(o=o||n(4),!(this instanceof _))return new _(t);this._readableState=new v(t,this),this.readable=!0,t&&(\"function\"===typeof t.read&&(this._read=t.read),\"function\"===typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,n,r,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,I(t)}(t,s)):(i||(o=function(t,e){var n;r=e,c.isBuffer(r)||r instanceof h||\"string\"===typeof e||void 0===e||t.objectMode||(n=new TypeError(\"Invalid non-string/buffer chunk\"));var r;return n}(s,e)),o?t.emit(\"error\",o):s.objectMode||e&&e.length>0?(\"string\"===typeof e||s.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),r?s.endEmitted?t.emit(\"error\",new Error(\"stream.unshift() after end event\")):w(t,s,e,!0):s.ended?t.emit(\"error\",new Error(\"stream.push() after EOF\")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?w(t,s,e,!1):A(t,s)):w(t,s,e,!1))):r||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function w(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit(\"data\",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&I(t)),A(t,e)}Object.defineProperty(_.prototype,\"destroyed\",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=y.destroy,_.prototype._undestroy=y.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:\"string\"===typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=\"\"),n=!0),b(this,t,e,!1,n)},_.prototype.unshift=function(t){return b(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return p||(p=n(17).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var S=8388608;function E(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=S?t=S:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function I(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d(\"emitReadable\",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(T,t):T(t))}function T(t){d(\"emit readable\"),t.emit(\"readable\"),P(t)}function A(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(k,t,e))}function k(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d(\"maybeReadMore read 0\"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function M(t){d(\"readable nexttick read 0\"),t.read(0)}function C(t,e){e.reading||(d(\"resume read 0\"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit(\"resume\"),P(t),e.flowing&&!e.reading&&t.read(0)}function P(t){var e=t._readableState;for(d(\"flow\",e.flowing);e.flowing&&null!==t.read(););}function O(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(\"\"):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function R(t){var e=t._readableState;if(e.length>0)throw new Error('\"endReadable()\" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(x,e,t))}function x(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit(\"end\"))}function L(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}_.prototype.read=function(t){d(\"read\",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d(\"read: emitReadable\",e.length,e.ended),0===e.length&&e.ended?R(this):I(this),null;if(0===(t=E(t,e))&&e.ended)return 0===e.length&&R(this),null;var r,i=e.needReadable;return d(\"need readable\",i),(0===e.length||e.length-t<e.highWaterMark)&&d(\"length less than watermark\",i=!0),e.ended||e.reading?d(\"reading or ended\",i=!1):i&&(d(\"do read\"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=E(n,e))),null===(r=t>0?O(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&R(this)),null!==r&&this.emit(\"data\",r),r},_.prototype._read=function(t){this.emit(\"error\",new Error(\"_read() is not implemented\"))},_.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,d(\"pipe count=%d opts=%j\",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?h:_;function c(e,r){d(\"onunpipe\"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d(\"cleanup\"),t.removeListener(\"close\",m),t.removeListener(\"finish\",v),t.removeListener(\"drain\",f),t.removeListener(\"error\",y),t.removeListener(\"unpipe\",c),n.removeListener(\"end\",h),n.removeListener(\"end\",_),n.removeListener(\"data\",g),l=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||f())}function h(){d(\"onend\"),t.end()}o.endEmitted?i.nextTick(u):n.once(\"end\",u),t.on(\"unpipe\",c);var f=function(t){return function(){var e=t._readableState;d(\"pipeOnDrain\",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,\"data\")&&(e.flowing=!0,P(t))}}(n);t.on(\"drain\",f);var l=!1;var p=!1;function g(e){d(\"ondata\"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==L(o.pipes,t))&&!l&&(d(\"false write response, pause\",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function y(e){d(\"onerror\",e),_(),t.removeListener(\"error\",y),0===a(t,\"error\")&&t.emit(\"error\",e)}function m(){t.removeListener(\"finish\",v),_()}function v(){d(\"onfinish\"),t.removeListener(\"close\",m),_()}function _(){d(\"unpipe\"),n.unpipe(t)}return n.on(\"data\",g),function(t,e,n){if(\"function\"===typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,\"error\",y),t.once(\"close\",m),t.once(\"finish\",v),t.emit(\"pipe\",n),o.flowing||(d(\"pipe resume\"),n.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit(\"unpipe\",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit(\"unpipe\",this,n);return this}var s=L(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit(\"unpipe\",this,n),this)},_.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if(\"data\"===t)!1!==this._readableState.flowing&&this.resume();else if(\"readable\"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&I(this):i.nextTick(M,this))}return n},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t=this._readableState;return t.flowing||(d(\"resume\"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(C,t,e))}(this,t)),this},_.prototype.pause=function(){return d(\"call pause flowing=%j\",this._readableState.flowing),!1!==this._readableState.flowing&&(d(\"pause\"),this._readableState.flowing=!1,this.emit(\"pause\")),this},_.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on(\"end\",function(){if(d(\"wrapped end\"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on(\"data\",function(i){(d(\"wrapped data\"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&void 0!==i)&&((n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause())))}),t)void 0===this[i]&&\"function\"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<m.length;o++)t.on(m[o],this.emit.bind(this,m[o]));return this._read=function(e){d(\"wrapped _read\",e),r&&(r=!1,t.resume())},this},Object.defineProperty(_.prototype,\"readableHighWaterMark\",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=O}).call(e,n(1),n(0))},function(t,e,n){t.exports=o;var r=n(4),i=n(7);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit(\"error\",new Error(\"write callback called multiple times\"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(\"function\"===typeof t.transform&&(this._transform=t.transform),\"function\"===typeof t.flush&&(this._flush=t.flush)),this.on(\"prefinish\",s)}function s(){var t=this;\"function\"===typeof this._flush?this._flush(function(e,n){a(t,e,n)}):a(this,null,null)}function a(t,e,n){if(e)return t.emit(\"error\",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error(\"Calling transform done when ws.length != 0\");if(t._transformState.transforming)throw new Error(\"Calling transform done when still transforming\");return t.push(null)}i.inherits=n(2),i.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error(\"_transform() is not implemented\")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit(\"close\")})}},function(t,e,n){(function(e,r,i){var o=n(8);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var a,u=!e.browser&&[\"v0.10\",\"v0.9.\"].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;v.WritableState=m;var c=n(7);c.inherits=n(2);var h={deprecate:n(59)},f=n(25),l=n(3).Buffer,d=i.Uint8Array||function(){};var p,g=n(24);function y(){}function m(t,e){a=a||n(4),t=t||{};var r=e instanceof a;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,c=t.writableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:h,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===t.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=t.defaultEncoding||\"utf8\",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(I,t,e),t._writableState.errorEmitted=!0,t.emit(\"error\",r)):(i(r),t._writableState.errorEmitted=!0,t.emit(\"error\",r),I(t,e))}(t,n,r,e,i);else{var s=S(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||w(t,n),r?u(b,t,n,s,i):b(t,n,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(t){if(a=a||n(4),!p.call(v,this)&&!(this instanceof a))return new v(t);this._writableState=new m(t,this),this.writable=!0,t&&(\"function\"===typeof t.write&&(this._write=t.write),\"function\"===typeof t.writev&&(this._writev=t.writev),\"function\"===typeof t.destroy&&(this._destroy=t.destroy),\"function\"===typeof t.final&&(this._final=t.final)),f.call(this)}function _(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit(\"drain\"))}(t,e),e.pendingcb--,r(),I(t,e)}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,_(t,e,!0,e.length,i,\"\",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,h=n.encoding,f=n.callback;if(_(t,e,!1,e.objectMode?1:c.length,c,h,f),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function S(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function E(t,e){t._final(function(n){e.pendingcb--,n&&t.emit(\"error\",n),e.prefinished=!0,t.emit(\"prefinish\"),I(t,e)})}function I(t,e){var n=S(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||(\"function\"===typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(E,t,e)):(e.prefinished=!0,t.emit(\"prefinish\")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit(\"finish\"))),n}c.inherits(v,f),m.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(m.prototype,\"buffer\",{get:h.deprecate(function(){return this.getBuffer()},\"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.\",\"DEP0003\")})}catch(t){}}(),\"function\"===typeof Symbol&&Symbol.hasInstance&&\"function\"===typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===v&&(t&&t._writableState instanceof m)}})):p=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit(\"error\",new Error(\"Cannot pipe, not readable\"))},v.prototype.write=function(t,e,n){var r,i=this._writableState,s=!1,a=!i.objectMode&&(r=t,l.isBuffer(r)||r instanceof d);return a&&!l.isBuffer(t)&&(t=function(t){return l.from(t)}(t)),\"function\"===typeof e&&(n=e,e=null),a?e=\"buffer\":e||(e=i.defaultEncoding),\"function\"!==typeof n&&(n=y),i.ended?function(t,e){var n=new Error(\"write after end\");t.emit(\"error\",n),o.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var i=!0,s=!1;return null===n?s=new TypeError(\"May not write null values to stream\"):\"string\"===typeof n||void 0===n||e.objectMode||(s=new TypeError(\"Invalid non-string/buffer chunk\")),s&&(t.emit(\"error\",s),o.nextTick(r,s),i=!1),i}(this,i,t,n))&&(i.pendingcb++,s=function(t,e,n,r,i,o){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||\"string\"!==typeof e||(e=l.from(e,n));return e}(e,r,i);r!==s&&(n=!0,i=\"buffer\",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,a,r,i,o);return u}(this,i,a,t,e,n)),s},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},v.prototype.setDefaultEncoding=function(t){if(\"string\"===typeof t&&(t=t.toLowerCase()),!([\"hex\",\"utf8\",\"utf-8\",\"ascii\",\"binary\",\"base64\",\"ucs2\",\"ucs-2\",\"utf16le\",\"utf-16le\",\"raw\"].indexOf((t+\"\").toLowerCase())>-1))throw new TypeError(\"Unknown encoding: \"+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,\"writableHighWaterMark\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,n){n(new Error(\"_write() is not implemented\"))},v.prototype._writev=null,v.prototype.end=function(t,e,n){var r=this._writableState;\"function\"===typeof t?(n=t,t=null,e=null):\"function\"===typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,I(t,e),n&&(e.finished?o.nextTick(n):t.once(\"finish\",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,\"destroyed\",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(e,n(0),n(39).setImmediate,n(1))},function(t,e,n){var r=n(8);function i(t,e){t.emit(\"error\",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){t.exports=n(6).EventEmitter},function(t,e,n){(function(e,r){var i=n(10).Transform,s=n(46),a=n(60),u=n(3).Buffer;t.exports=function(t,n,h){var f,l,d=\"browser\"===e.title,p=!!r.WebSocket,g=d?function t(e,n,r){if(l.bufferedAmount>m)return void setTimeout(t,v,e,n,r);_&&\"string\"===typeof e&&(e=u.from(e,\"utf8\"));try{l.send(e)}catch(t){return r(t)}r()}:function(t,e,n){if(l.readyState!==l.OPEN)return void n();_&&\"string\"===typeof t&&(t=u.from(t,\"utf8\"));l.send(t,n)};n&&!Array.isArray(n)&&\"object\"===(\"undefined\"===typeof n?\"undefined\":(0,o.default)(n))&&(h=n,n=null,(\"string\"===typeof h.protocol||Array.isArray(h.protocol))&&(n=h.protocol));h||(h={});void 0===h.objectMode&&(h.objectMode=!(!0===h.binary||void 0===h.binary));var y=function(t,e,n){var r=new i({objectMode:t.objectMode});return r._write=e,r._flush=n,r}(h,g,function(t){l.close(),t()});h.objectMode||(y._writev=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)\"string\"===typeof t[r].chunk?n[r]=u.from(t[r],\"utf8\"):n[r]=t[r].chunk;this._write(u.concat(n),\"binary\",e)});var m=h.browserBufferSize||524288,v=h.browserBufferTimeout||1e3;\"object\"===(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))?l=t:(l=p&&d?new a(t,n):new a(t,n,h)).binaryType=\"arraybuffer\";l.readyState===l.OPEN?f=y:(f=s.obj(),l.onopen=function(){f.setReadable(y),f.setWritable(y),f.emit(\"connect\")});f.socket=l,l.onclose=function(){f.end(),f.destroy()},l.onerror=function(t){f.destroy(t)},l.onmessage=function(t){var e=c.decode(t.data);e=e instanceof ArrayBuffer?u.from(e):u.from(e,\"utf8\");y.push(e)},y.on(\"close\",function(){l.close()});var _=!h.objectMode;return f}}).call(e,n(0),n(1))},function(t,e,n){(function(e,r){var i=n(6),s=n(16),a=n(18),u=n(49),c=n(10).Writable,h=n(2),f=n(57),l=n(44),d=n(12),p=e.setImmediate||function(t){r.nextTick(t)},g={keepalive:10,reschedulePings:!0,protocolId:\"MQTT\",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:6e4,clean:!0,resubscribe:!0};function y(t,e,n){t.emit(\"packetsend\",e),!u.writeToStream(e,t.stream)&&n?t.stream.once(\"drain\",n):n&&n()}function m(){}function v(t,e){var n,r=this;if(!(this instanceof v))return new v(t,e);for(n in this.options=e||{},g)\"undefined\"===typeof this.options[n]?this.options[n]=g[n]:this.options[n]=e[n];this.options.clientId=\"string\"===typeof this.options.clientId?this.options.clientId:\"mqttjs_\"+Math.random().toString(16).substr(2,8),this.streamBuilder=t,this.outgoingStore=this.options.outgoingStore||new s,this.incomingStore=this.options.incomingStore||new s,this.queueQoSZero=void 0===this.options.queueQoSZero||this.options.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this.nextId=Math.floor(65535*Math.random()),this.outgoing={},this.on(\"connect\",function(){if(!this.disconnected){this.connected=!0;var t=null;(t=this.outgoingStore.createStream()).once(\"readable\",function(){!function e(){var n,i=t.read(1);i&&(!r.disconnecting&&!r.reconnectTimer&&r.options.reconnectPeriod>0?(t.read(0),n=r.outgoing[i.messageId],r.outgoing[i.messageId]=function(t,r){n&&n(t,r),e()},r._sendPacket(i)):t.destroy&&t.destroy())}()}).on(\"error\",this.emit.bind(this,\"error\"))}}),this.on(\"close\",function(){this.connected=!1,clearTimeout(this.connackTimer)}),this.on(\"connect\",this._setupPingTimer),this.on(\"connect\",function(){var t=this.queue;!function e(){var n,i=t.shift();i&&(n=i.packet,r._sendPacket(n,function(t){i.cb&&i.cb(t),e()}))}()});var o=!0;this.on(\"connect\",function(){!o&&this.options.clean&&Object.keys(this._resubscribeTopics).length>0&&(this.options.resubscribe?(this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics)):this._resubscribeTopics={}),o=!1}),this.on(\"close\",function(){null!==r.pingTimer&&(r.pingTimer.clear(),r.pingTimer=null)}),this.on(\"close\",this._setupReconnect),i.EventEmitter.call(this),this._setupStream()}h(v,i.EventEmitter),v.prototype._setupStream=function(){var t,e=this,n=new c,i=u.parser(this.options),o=null,s=[];function h(){r.nextTick(f)}function f(){var t=s.shift(),n=o;t?e._handlePacket(t,h):(o=null,n())}this._clearReconnect(),this.stream=this.streamBuilder(this),i.on(\"packet\",function(t){s.push(t)}),n._write=function(t,e,n){o=n,i.parse(t),f()},this.stream.pipe(n),this.stream.on(\"error\",m),a(this.stream,this.emit.bind(this,\"close\")),(t=Object.create(this.options)).cmd=\"connect\",y(this,t),i.on(\"error\",this.emit.bind(this,\"error\")),this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){e._cleanUp(!0)},this.options.connectTimeout)},v.prototype._handlePacket=function(t,e){switch(this.emit(\"packetreceive\",t),t.cmd){case\"publish\":this._handlePublish(t,e);break;case\"puback\":case\"pubrec\":case\"pubcomp\":case\"suback\":case\"unsuback\":this._handleAck(t),e();break;case\"pubrel\":this._handlePubrel(t,e);break;case\"connack\":this._handleConnack(t),e();break;case\"pingresp\":this._handlePingresp(t),e()}},v.prototype._checkDisconnecting=function(t){return this.disconnecting&&(t?t(new Error(\"client disconnecting\")):this.emit(\"error\",new Error(\"client disconnecting\"))),this.disconnecting},v.prototype.publish=function(t,e,n,r){var i;\"function\"===typeof n&&(r=n,n=null);if(n=d({qos:0,retain:!1,dup:!1},n),this._checkDisconnecting(r))return this;switch(i={cmd:\"publish\",topic:t,payload:e,qos:n.qos,retain:n.retain,messageId:this._nextId(),dup:n.dup},n.qos){case 1:case 2:this.outgoing[i.messageId]=r||m,this._sendPacket(i);break;default:this._sendPacket(i,r)}return this},v.prototype.subscribe=function(){var t,e,n=Array.prototype.slice.call(arguments),r=[],i=n.shift(),o=i.resubscribe,s=n.pop()||m,a=n.pop(),u=this;if(delete i.resubscribe,\"string\"===typeof i&&(i=[i]),\"function\"!==typeof s&&(a=s,s=m),null!==(e=l.validateTopics(i)))return p(s,new Error(\"Invalid topic \"+e)),this;if(this._checkDisconnecting(s))return this;if(a=d({qos:0},a),Array.isArray(i)?i.forEach(function(t){(u._resubscribeTopics[t]<a.qos||!u._resubscribeTopics.hasOwnProperty(t)||o)&&r.push({topic:t,qos:a.qos})}):Object.keys(i).forEach(function(t){(u._resubscribeTopics[t]<i[t]||!u._resubscribeTopics.hasOwnProperty(t)||o)&&r.push({topic:t,qos:i[t]})}),t={cmd:\"subscribe\",subscriptions:r,qos:1,retain:!1,dup:!1,messageId:this._nextId()},r.length){if(this.options.resubscribe){var c=[];r.forEach(function(t){u.options.reconnectPeriod>0&&(u._resubscribeTopics[t.topic]=t.qos,c.push(t.topic))}),u.messageIdToTopic[t.messageId]=c}return this.outgoing[t.messageId]=function(t,e){if(!t)for(var n=e.granted,i=0;i<n.length;i+=1)r[i].qos=n[i];s(t,r)},this._sendPacket(t),this}s(null,[])},v.prototype.unsubscribe=function(t,e){var n={cmd:\"unsubscribe\",qos:1,messageId:this._nextId()},r=this;return e=e||m,this._checkDisconnecting(e)?this:(\"string\"===typeof t?n.unsubscriptions=[t]:\"object\"===(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))&&t.length&&(n.unsubscriptions=t),this.options.resubscribe&&n.unsubscriptions.forEach(function(t){delete r._resubscribeTopics[t]}),this.outgoing[n.messageId]=e,this._sendPacket(n),this)},v.prototype.end=function(t,e){var n=this;function r(){n.disconnected=!0,n.incomingStore.close(function(){n.outgoingStore.close(function(){e&&e.apply(null,arguments),n.emit(\"end\")})}),n._deferredReconnect&&n._deferredReconnect()}function i(){n._cleanUp(t,p.bind(null,r))}return\"function\"===typeof t&&(e=t,t=!1),this.disconnecting?this:(this._clearReconnect(),this.disconnecting=!0,!t&&Object.keys(this.outgoing).length>0?this.once(\"outgoingEmpty\",setTimeout.bind(null,i,10)):i(),this)},v.prototype.removeOutgoingMessage=function(t){var e=this.outgoing[t];return delete this.outgoing[t],this.outgoingStore.del({messageId:t},function(){e(new Error(\"Message removed\"))}),this},v.prototype.reconnect=function(t){var e=this,n=function(){t?(e.options.incomingStore=t.incomingStore,e.options.outgoingStore=t.outgoingStore):(e.options.incomingStore=null,e.options.outgoingStore=null),e.incomingStore=e.options.incomingStore||new s,e.outgoingStore=e.options.outgoingStore||new s,e.disconnecting=!1,e.disconnected=!1,e._deferredReconnect=null,e._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=n:n(),this},v.prototype._reconnect=function(){this.emit(\"reconnect\"),this._setupStream()},v.prototype._setupReconnect=function(){var t=this;!t.disconnecting&&!t.reconnectTimer&&t.options.reconnectPeriod>0&&(this.reconnecting||(this.emit(\"offline\"),this.reconnecting=!0),t.reconnectTimer=setInterval(function(){t._reconnect()},t.options.reconnectPeriod))},v.prototype._clearReconnect=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},v.prototype._cleanUp=function(t,e){var n;e&&this.stream.on(\"close\",e),t?(0===this.options.reconnectPeriod&&this.options.clean&&(n=this.outgoing)&&Object.keys(n).forEach(function(t){\"function\"===typeof n[t]&&(n[t](new Error(\"Connection closed\")),delete n[t])}),this.stream.destroy()):this._sendPacket({cmd:\"disconnect\"},p.bind(null,this.stream.end.bind(this.stream))),this.disconnecting||(this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(this.pingTimer.clear(),this.pingTimer=null),e&&!this.connected&&(this.stream.removeListener(\"close\",e),e())},v.prototype._sendPacket=function(t,e){if(this.connected)if(this._shiftPingInterval(),\"publish\"===t.cmd)switch(t.qos){case 2:case 1:!function(t,e,n){t.outgoingStore.put(e,function(r){if(r)return n&&n(r);y(t,e,n)})}(this,t,e);break;case 0:default:y(this,t,e)}else y(this,t,e);else 0===(t.qos||0)&&this.queueQoSZero||\"publish\"!==t.cmd?this.queue.push({packet:t,cb:e}):t.qos>0?(e=this.outgoing[t.messageId],this.outgoingStore.put(t,function(t){if(t)return e&&e(t)})):e&&e(new Error(\"No connection to broker\"))},v.prototype._setupPingTimer=function(){var t=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=f(function(){t._checkPing()},1e3*this.options.keepalive))},v.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},v.prototype._checkPing=function(){this.pingResp?(this.pingResp=!1,this._sendPacket({cmd:\"pingreq\"})):this._cleanUp(!0)},v.prototype._handlePingresp=function(){this.pingResp=!0},v.prototype._handleConnack=function(t){var e=t.returnCode;if(clearTimeout(this.connackTimer),0===e)this.reconnecting=!1,this.emit(\"connect\",t);else if(e>0){var n=new Error(\"Connection refused: \"+[\"\",\"Unacceptable protocol version\",\"Identifier rejected\",\"Server unavailable\",\"Bad username or password\",\"Not authorized\"][e]);n.code=e,this.emit(\"error\",n)}},v.prototype._handlePublish=function(t,e){var n=t.topic.toString(),r=t.payload,i=t.qos,o=t.messageId,s=this;switch(i){case 2:this.incomingStore.put(t,function(){s._sendPacket({cmd:\"pubrec\",messageId:o},e)});break;case 1:this.emit(\"message\",n,r,t),this.handleMessage(t,function(t){if(t)return e&&e(t);s._sendPacket({cmd:\"puback\",messageId:o},e)});break;case 0:this.emit(\"message\",n,r,t),this.handleMessage(t,e)}},v.prototype.handleMessage=function(t,e){e()},v.prototype._handleAck=function(t){var e=t.messageId,n=t.cmd,r=null,i=this.outgoing[e],o=this;if(i){switch(n){case\"pubcomp\":case\"puback\":delete this.outgoing[e],this.outgoingStore.del(t,i);break;case\"pubrec\":r={cmd:\"pubrel\",qos:2,messageId:e},this._sendPacket(r);break;case\"suback\":if(delete this.outgoing[e],1===t.granted.length&&0!==(128&t.granted[0])){var s=this.messageIdToTopic[e];s&&s.forEach(function(t){delete o._resubscribeTopics[t]})}i(null,t);break;case\"unsuback\":delete this.outgoing[e],i(null);break;default:o.emit(\"error\",new Error(\"unrecognized packet type\"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit(\"outgoingEmpty\")}},v.prototype._handlePubrel=function(t,e){var n=this,r={cmd:\"pubcomp\",messageId:t.messageId};n.incomingStore.get(t,function(i,o){i||\"pubrel\"===o.cmd?n._sendPacket(r,e):(n.emit(\"message\",o.topic,o.payload,o),n.incomingStore.put(t),n.handleMessage(o,function(t){if(t)return e&&e(t);n._sendPacket(r,e)}))})},v.prototype._nextId=function(){var t=this.nextId++;return 65535===t&&(this.nextId=1),t},v.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},t.exports=v}).call(e,n(1),n(0))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,\"loaded\",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,\"id\",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=c(t),r=n[0],s=n[1],a=new o(function(t,e,n){return 3*(e+n)/4-n}(0,r,s)),u=0,h=s>0?r-4:r,f=0;f<h;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;2===s&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,a[u++]=255&e);1===s&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(h(t,s,s+16383>a?a:s+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+\"==\")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+\"=\"));return o.join(\"\")};for(var r=[],i=[],o=\"undefined\"!==typeof Uint8Array?Uint8Array:Array,s=\"ABCDEFGHIJKLMNOPQRSTUVmyYZabcdefghijklmnopqrstuvmyyz0123456789+/\",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var n=t.indexOf(\"=\");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function h(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join(\"\")}i[\"-\".charCodeAt(0)]=62,i[\"_\".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,h=-7,f=n?i-1:0,l=n?-1:1,d=t[e+f];for(f+=l,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=256*o+t[e+f],f+=l,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+t[e+f],f+=l,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,f=h>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?l/u:l*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+d]=255&s,d+=p,s/=256,c-=8);t[n+d-p]|=128*g}},function(t,e){\"function\"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return\"[object Array]\"==n.call(t)}},function(t,e,n){(function(t,r){var i;!function(s){\"object\"==(\"undefined\"===typeof e?\"undefined\":(0,o.default)(e))&&e&&e.nodeType,\"object\"==(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))&&t&&t.nodeType;var a=\"object\"==(\"undefined\"===typeof r?\"undefined\":(0,o.default)(r))&&r;a.global!==a&&a.window!==a&&a.self;var u,c=2147483647,h=36,f=1,l=26,d=38,p=700,g=72,y=128,m=\"-\",v=/^xn--/,_=/[^\\x20-\\x7E]/,b=/[\\x2E\\u3002\\uFF0E\\uFF61]/g,w={overflow:\"Overflow: input needs wider integers to process\",\"not-basic\":\"Illegal input >= 0x80 (not a basic code point)\",\"invalid-input\":\"Invalid input\"},S=h-f,E=Math.floor,I=String.fromCharCode;function T(t){throw new RangeError(w[t])}function A(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function k(t,e){var n=t.split(\"@\"),r=\"\";return n.length>1&&(r=n[0]+\"@\",t=n[1]),r+A((t=t.replace(b,\".\")).split(\".\"),e).join(\".\")}function M(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function C(t){return A(t,function(t){var e=\"\";return t>65535&&(e+=I((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=I(t)}).join(\"\")}function P(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function O(t,e,n){var r=0;for(t=n?E(t/p):t>>1,t+=E(t/e);t>S*l>>1;r+=h)t=E(t/S);return E(r+(S+1)*t/(t+d))}function R(t){var e,n,r,i,o,s,a,u,d,p,v,_=[],b=t.length,w=0,S=y,I=g;for((n=t.lastIndexOf(m))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&T(\"not-basic\"),_.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<b;){for(o=w,s=1,a=h;i>=b&&T(\"invalid-input\"),((u=(v=t.charCodeAt(i++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:h)>=h||u>E((c-w)/s))&&T(\"overflow\"),w+=u*s,!(u<(d=a<=I?f:a>=I+l?l:a-I));a+=h)s>E(c/(p=h-d))&&T(\"overflow\"),s*=p;I=O(w-o,e=_.length+1,0==o),E(w/e)>c-S&&T(\"overflow\"),S+=E(w/e),w%=e,_.splice(w++,0,S)}return C(_)}function x(t){var e,n,r,i,o,s,a,u,d,p,v,_,b,w,S,A=[];for(_=(t=M(t)).length,e=y,n=0,o=g,s=0;s<_;++s)(v=t[s])<128&&A.push(I(v));for(r=i=A.length,i&&A.push(m);r<_;){for(a=c,s=0;s<_;++s)(v=t[s])>=e&&v<a&&(a=v);for(a-e>E((c-n)/(b=r+1))&&T(\"overflow\"),n+=(a-e)*b,e=a,s=0;s<_;++s)if((v=t[s])<e&&++n>c&&T(\"overflow\"),v==e){for(u=n,d=h;!(u<(p=d<=o?f:d>=o+l?l:d-o));d+=h)S=u-p,w=h-p,A.push(I(P(p+S%w,0))),u=E(S/w);A.push(I(P(u,0))),o=O(n,b,r==i),n=0,++r}++n,++e}return A.join(\"\")}u={version:\"1.4.1\",ucs2:{decode:M,encode:C},decode:R,encode:x,toASCII:function(t){return k(t,function(t){return _.test(t)?\"xn--\"+x(t):t})},toUnicode:function(t){return k(t,function(t){return v.test(t)?R(t.slice(4).toLowerCase()):t})}},void 0===(i=function(){return u}.call(e,n,e,t))||(t.exports=i)}()}).call(e,n(28)(t),n(1))},function(t,e,n){function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||\"&\",n=n||\"=\";var s={};if(\"string\"!==typeof t||0===t.length)return s;var a=/\\+/g;t=t.split(e);var u=1e3;o&&\"number\"===typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var h=0;h<c;++h){var f,l,d,p,g=t[h].replace(a,\"%20\"),y=g.indexOf(n);y>=0?(f=g.substr(0,y),l=g.substr(y+1)):(f=g,l=\"\"),d=decodeURIComponent(f),p=decodeURIComponent(l),r(s,d)?i(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var i=Array.isArray||function(t){return\"[object Array]\"===Object.prototype.toString.call(t)}},function(t,e,n){var r=function(t){switch(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t)){case\"string\":return t;case\"boolean\":return t?\"true\":\"false\";case\"number\":return isFinite(t)?t:\"\";default:return\"\"}};t.exports=function(t,e,n,u){return e=e||\"&\",n=n||\"=\",null===t&&(t=void 0),\"object\"===(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))?s(a(t),function(o){var a=encodeURIComponent(r(o))+n;return i(t[o])?s(t[o],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[o]))}).join(e):u?encodeURIComponent(r(u))+n+encodeURIComponent(r(t)):\"\"};var i=Array.isArray||function(t){return\"[object Array]\"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){e.decode=e.parse=n(34),e.encode=e.stringify=n(35)},function(t,e,n){var r=n(9),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),o(i,s),s.from=function(t,e,n){if(\"number\"===typeof t)throw new TypeError(\"Argument must not be a number\");return i(t,e,n)},s.alloc=function(t,e,n){if(\"number\"!==typeof t)throw new TypeError(\"Argument must be a number\");var r=i(t);return void 0!==e?\"string\"===typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if(\"number\"!==typeof t)throw new TypeError(\"Argument must be a number\");return i(t)},s.allocUnsafeSlow=function(t){if(\"number\"!==typeof t)throw new TypeError(\"Argument must be a number\");return r.SlowBuffer(t)}},function(t,e,n){(function(t,e){!function(t,n){if(!t.setImmediate){var r,i,o,s,a,u=1,c={},h=!1,f=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,\"[object process]\"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage(\"\",\"*\"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):f&&\"onreadystatechange\"in f.createElement(\"script\")?(i=f.documentElement,r=function(t){var e=f.createElement(\"script\");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(s=\"setImmediate$\"+Math.random()+\"$\",a=function(e){e.source===t&&\"string\"===typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener(\"message\",a,!1):t.attachEvent(\"onmessage\",a),r=function(e){t.postMessage(s+e,\"*\")}),l.setImmediate=function(t){\"function\"!==typeof t&&(t=new Function(\"\"+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},l.clearImmediate=d}function d(t){delete c[t]}function p(t){if(h)setTimeout(p,0,t);else{var e=c[t];if(e){h=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{d(t),h=!1}}}}}(\"undefined\"===typeof t?this:t)}).call(e,n(1),n(0))},function(t,e,n){(function(t){var r=\"undefined\"!==typeof t&&t||d,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(38),e.setImmediate=\"undefined\"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate=\"undefined\"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(e,n(1))},function(t,e,n){t.exports={isString:function(t){return\"string\"===typeof t},isObject:function(t){return\"object\"===(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e){t.exports=function(t){return t&&\"object\"===(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))&&\"function\"===typeof t.copy&&\"function\"===typeof t.fill&&\"function\"===typeof t.readUInt8}},function(t,e,n){(function(t,r){var i=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(u(arguments[n]));return e.join(\" \")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(i,function(t){if(\"%%\"===t)return\"%\";if(n>=o)return t;switch(t){case\"%s\":return String(r[n++]);case\"%d\":return Number(r[n++]);case\"%j\":try{return JSON.stringify(r[n++])}catch(t){return\"[Circular]\"}default:return t}}),a=r[n];n<o;a=r[++n])y(a)||!w(a)?s+=\" \"+a:s+=\" \"+u(a);return s},e.deprecate=function(n,i){if(_(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var s,a={};function u(t,n){var r={seen:[],stylize:h};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&e._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),f(r,t,r.depth)}function c(t,e){var n=u.styles[e];return n?\"\\x1b[\"+u.colors[n][0]+\"m\"+t+\"\\x1b[\"+u.colors[n][1]+\"m\":t}function h(t,e){return t}function f(t,n,r){if(t.customInspect&&n&&I(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return v(i)||(i=f(t,i,r)),i}var o=function(t,e){if(_(e))return t.stylize(\"undefined\",\"undefined\");if(v(e)){var n=\"'\"+JSON.stringify(e).replace(/^\"|\"$/g,\"\").replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"')+\"'\";return t.stylize(n,\"string\")}if(m(e))return t.stylize(\"\"+e,\"number\");if(g(e))return t.stylize(\"\"+e,\"boolean\");if(y(e))return t.stylize(\"null\",\"null\")}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),E(n)&&(s.indexOf(\"message\")>=0||s.indexOf(\"description\")>=0))return l(n);if(0===s.length){if(I(n)){var u=n.name?\": \"+n.name:\"\";return t.stylize(\"[Function\"+u+\"]\",\"special\")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),\"regexp\");if(S(n))return t.stylize(Date.prototype.toString.call(n),\"date\");if(E(n))return l(n)}var c,h=\"\",w=!1,T=[\"{\",\"}\"];(p(n)&&(w=!0,T=[\"[\",\"]\"]),I(n))&&(h=\" [Function\"+(n.name?\": \"+n.name:\"\")+\"]\");return b(n)&&(h=\" \"+RegExp.prototype.toString.call(n)),S(n)&&(h=\" \"+Date.prototype.toUTCString.call(n)),E(n)&&(h=\" \"+l(n)),0!==s.length||w&&0!=n.length?r<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),\"regexp\"):t.stylize(\"[Object]\",\"special\"):(t.seen.push(n),c=w?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)M(e,String(s))?o.push(d(t,e,n,r,String(s),!0)):o.push(\"\");return i.forEach(function(i){i.match(/^\\d+$/)||o.push(d(t,e,n,r,i,!0))}),o}(t,n,r,a,s):s.map(function(e){return d(t,n,r,a,e,w)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf(\"\\n\")>=0&&0,t+e.replace(/\\u001b\\[\\d\\d?m/g,\"\").length+1},0)>60)return n[0]+(\"\"===e?\"\":e+\"\\n \")+\" \"+t.join(\",\\n  \")+\" \"+n[1];return n[0]+e+\" \"+t.join(\", \")+\" \"+n[1]}(c,h,T)):T[0]+h+T[1]}function l(t){return\"[\"+Error.prototype.toString.call(t)+\"]\"}function d(t,e,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize(\"[Getter/Setter]\",\"special\"):t.stylize(\"[Getter]\",\"special\"):u.set&&(a=t.stylize(\"[Setter]\",\"special\")),M(r,i)||(s=\"[\"+i+\"]\"),a||(t.seen.indexOf(u.value)<0?(a=y(n)?f(t,u.value,null):f(t,u.value,n-1)).indexOf(\"\\n\")>-1&&(a=o?a.split(\"\\n\").map(function(t){return\"  \"+t}).join(\"\\n\").substr(2):\"\\n\"+a.split(\"\\n\").map(function(t){return\"   \"+t}).join(\"\\n\")):a=t.stylize(\"[Circular]\",\"special\")),_(s)){if(o&&i.match(/^\\d+$/))return a;(s=JSON.stringify(\"\"+i)).match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,\"name\")):(s=s.replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"').replace(/(^\"|\"$)/g,\"'\"),s=t.stylize(s,\"string\"))}return s+\": \"+a}function p(t){return Array.isArray(t)}function g(t){return\"boolean\"===typeof t}function y(t){return null===t}function m(t){return\"number\"===typeof t}function v(t){return\"string\"===typeof t}function _(t){return void 0===t}function b(t){return w(t)&&\"[object RegExp]\"===T(t)}function w(t){return\"object\"===(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))&&null!==t}function S(t){return w(t)&&\"[object Date]\"===T(t)}function E(t){return w(t)&&(\"[object Error]\"===T(t)||t instanceof Error)}function I(t){return\"function\"===typeof t}function T(t){return Object.prototype.toString.call(t)}function A(t){return t<10?\"0\"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(_(s)&&(s=r.env.NODE_DEBUG||\"\"),t=t.toUpperCase(),!a[t])if(new RegExp(\"\\\\b\"+t+\"\\\\b\",\"i\").test(s)){var n=r.pid;a[t]=function(){var r=e.format.apply(e,arguments);console.error(\"%s %d: %s\",t,n,r)}}else a[t]=function(){};return a[t]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:\"cyan\",number:\"yellow\",boolean:\"yellow\",undefined:\"grey\",null:\"bold\",string:\"green\",date:\"magenta\",regexp:\"red\"},e.isArray=p,e.isBoolean=g,e.isNull=y,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=v,e.isSymbol=function(t){return\"symbol\"===(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))},e.isUndefined=_,e.isRegExp=b,e.isObject=w,e.isDate=S,e.isError=E,e.isFunction=I,e.isPrimitive=function(t){return null===t||\"boolean\"===typeof t||\"number\"===typeof t||\"string\"===typeof t||\"symbol\"===(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))||\"undefined\"===typeof t},e.isBuffer=n(41);var k=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;console.log(\"%s - %s\",(t=new Date,n=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(\":\"),[t.getDate(),k[t.getMonth()],n].join(\" \")),e.format.apply(e,arguments))},e.inherits=n(31),e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,n(1),n(0))},function(t,e,n){(function(e){var r=n(27),i=n(16),s=n(11),a=n(12),u={};function c(t,e){if(\"object\"!==(\"undefined\"===typeof t?\"undefined\":(0,o.default)(t))||e||(e=t,t=null),e=e||{},t){var n=s.parse(t,!0);if(null!=n.port&&(n.port=Number(n.port)),null===(e=a(n,e)).protocol)throw new Error(\"Missing protocol\");e.protocol=e.protocol.replace(/:$/,\"\")}if(function(t){var e;t.auth&&((e=t.auth.match(/^(.+):(.+)$/))?(t.username=e[1],t.password=e[2]):t.username=t.auth)}(e),e.query&&\"string\"===typeof e.query.clientId&&(e.clientId=e.query.clientId),e.cert&&e.key){if(!e.protocol)throw new Error(\"Missing secure protocol key\");if(-1===[\"mqtts\",\"wss\",\"mys\"].indexOf(e.protocol))switch(e.protocol){case\"mqtt\":e.protocol=\"mqtts\";break;case\"ws\":e.protocol=\"wss\";break;case\"my\":e.protocol=\"mys\";break;default:throw new Error('Unknown protocol for secure connection: \"'+e.protocol+'\"!')}}if(!u[e.protocol]){var i=-1!==[\"mqtts\",\"wss\"].indexOf(e.protocol);e.protocol=[\"mqtt\",\"mqtts\",\"ws\",\"wss\",\"my\",\"mys\"].filter(function(t,e){return(!i||e%2!==0)&&\"function\"===typeof u[t]})[0]}if(!1===e.clean&&!e.clientId)throw new Error(\"Missing clientId for unclean clients\");return new r(function(t){return e.servers&&(t._reconnectCount&&t._reconnectCount!==e.servers.length||(t._reconnectCount=0),e.host=e.servers[t._reconnectCount].host,e.port=e.servers[t._reconnectCount].port,e.hostname=e.host,t._reconnectCount++),u[e.protocol](t,e)},e)}\"browser\"!==e.title?(u.mqtt=n(13),u.tcp=n(13),u.ssl=n(5),u.tls=n(5),u.mqtts=n(5)):(u.my=n(15),u.mys=n(15)),u.ws=n(14),u.wss=n(14),t.exports=c,t.exports.connect=c,t.exports.MqttClient=r,t.exports.Store=i}).call(e,n(0))},function(t,e,n){function r(t){for(var e=t.split(\"/\"),n=0;n<e.length;n++)if(\"+\"!==e[n]){if(\"#\"===e[n])return n===e.length-1;if(-1!==e[n].indexOf(\"+\")||-1!==e[n].indexOf(\"#\"))return!1}return!0}t.exports={validateTopics:function(t){if(0===t.length)return\"empty_topic_list\";for(var e=0;e<t.length;e++)if(!r(t[e]))return t[e];return null}}},function(t,e,n){var r=n(54),i=n(42),o=n(3).Buffer;function s(t){if(!(this instanceof s))return new s(t);if(this._bufs=[],this.length=0,\"function\"==typeof t){this._callback=t;var e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on(\"pipe\",function(t){t.on(\"error\",e)}),this.on(\"unpipe\",function(t){t.removeListener(\"error\",e)})}else this.append(t);r.call(this)}i.inherits(s,r),s.prototype._offset=function(t){var e,n=0,r=0;if(0===t)return[0,0];for(;r<this._bufs.length;r++){if(t<(e=n+this._bufs[r].length)||r==this._bufs.length-1)return[r,t-n];n=e}},s.prototype.append=function(t){var e=0;if(o.isBuffer(t))this._appendBuffer(t);else if(Array.isArray(t))for(;e<t.length;e++)this.append(t[e]);else if(t instanceof s)for(;e<t._bufs.length;e++)this.append(t._bufs[e]);else null!=t&&(\"number\"==typeof t&&(t=t.toString()),this._appendBuffer(o.from(t)));return this},s.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},s.prototype._write=function(t,e,n){this._appendBuffer(t),\"function\"==typeof n&&n()},s.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},s.prototype.end=function(t){r.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype.get=function(t){return this.slice(t,t+1)[0]},s.prototype.slice=function(t,e){return\"number\"==typeof t&&t<0&&(t+=this.length),\"number\"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},s.prototype.copy=function(t,e,n,r){if((\"number\"!=typeof n||n<0)&&(n=0),(\"number\"!=typeof r||r>this.length)&&(r=this.length),n>=this.length)return t||o.alloc(0);if(r<=0)return t||o.alloc(0);var i,s,a=!!t,u=this._offset(n),c=r-n,h=c,f=a&&e||0,l=u[1];if(0===n&&r==this.length){if(!a)return 1===this._bufs.length?this._bufs[0]:o.concat(this._bufs,this.length);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(t,f),f+=this._bufs[s].length;return t}if(h<=this._bufs[u[0]].length-l)return a?this._bufs[u[0]].copy(t,e,l,l+h):this._bufs[u[0]].slice(l,l+h);for(a||(t=o.allocUnsafe(c)),s=u[0];s<this._bufs.length;s++){if(!(h>(i=this._bufs[s].length-l))){this._bufs[s].copy(t,f,l,l+h);break}this._bufs[s].copy(t,f,l),f+=i,h-=i,l&&(l=0)}return t},s.prototype.shallowSlice=function(t,e){t=t||0,e=e||this.length,t<0&&(t+=this.length),e<0&&(e+=this.length);var n=this._offset(t),r=this._offset(e),i=this._bufs.slice(n[0],r[0]+1);return 0==r[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,r[1]),0!=n[1]&&(i[0]=i[0].slice(n[1])),new s(i)},s.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},s.prototype.consume=function(t){for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){for(var t=0,e=new s;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},s.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var e in t)!function(e){s.prototype[e]=function(n){return this.slice(n,n+t[e])[e](0)}}(e)}(),t.exports=s},function(t,e,n){(function(e,r){var i=n(10),o=n(18),s=n(2),a=n(58),u=e.from&&e.from!==Uint8Array.from?e.from([0]):new e([0]),c=function(t,e){t._corked?t.once(\"uncork\",e):e()},h=function(t,e){return function(n){n?function(t,e){t._autoDestroy&&t.destroy(e)}(t,\"premature close\"===n.message?null:n):e&&!t._ended&&t.end()}},f=function t(e,n,r){if(!(this instanceof t))return new t(e,n,r);i.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||!1!==r.autoDestroy,this._forwardDestroy=!r||!1!==r.destroy,this._forwardEnd=!r||!1!==r.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),n&&this.setReadable(n)};s(f,i.Duplex),f.obj=function(t,e,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new f(t,e,n)},f.prototype.cork=function(){1===++this._corked&&this.emit(\"cork\")},f.prototype.uncork=function(){this._corked&&0===--this._corked&&this.emit(\"uncork\")},f.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed)t&&t.destroy&&t.destroy();else if(null!==t&&!1!==t){var e=this,n=o(t,{writable:!0,readable:!1},h(this,this._forwardEnd)),i=function(){var t=e._ondrain;e._ondrain=null,t&&t()};this._unwrite&&r.nextTick(i),this._writable=t,this._writable.on(\"drain\",i),this._unwrite=function(){e._writable.removeListener(\"drain\",i),n()},this.uncork()}else this.end()},f.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed)t&&t.destroy&&t.destroy();else{if(null===t||!1===t)return this.push(null),void this.resume();var e,n=this,r=o(t,{writable:!1,readable:!0},h(this)),s=function(){n._forward()},a=function(){n.push(null)};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:(e=t,new i.Readable({objectMode:!0,highWaterMark:16}).wrap(e)),this._readable2.on(\"readable\",s),this._readable2.on(\"end\",a),this._unread=function(){n._readable2.removeListener(\"readable\",s),n._readable2.removeListener(\"end\",a),r()},this._forward()}},f.prototype._read=function(){this._drained=!0,this._forward()},f.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var t;for(this._forwarding=!0;this._drained&&null!==(t=a(this._readable2));)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}},f.prototype.destroy=function(t){if(!this.destroyed){this.destroyed=!0;var e=this;r.nextTick(function(){e._destroy(t)})}},f.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit(\"error\",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit(\"close\")},f.prototype._write=function(t,e,n){return this.destroyed?n():this._corked?c(this,this._write.bind(this,t,e,n)):t===u?this._finish(n):this._writable?void(!1===this._writable.write(t)?this._ondrain=n:n()):n()},f.prototype._finish=function(t){var e=this;this.emit(\"preend\"),c(this,function(){var n,r;n=e._forwardEnd&&e._writable,r=function(){!1===e._writableState.prefinished&&(e._writableState.prefinished=!0),e.emit(\"prefinish\"),c(e,t)},n?n._writableState&&n._writableState.finished?r():n._writableState?n.end(r):(n.end(),r()):r()})},f.prototype.end=function(t,e,n){return\"function\"===typeof t?this.end(null,null,t):\"function\"===typeof e?this.end(t,null,e):(this._ended=!0,t&&this.write(t),this._writableState.ending||this.write(u),i.Writable.prototype.end.call(this,n))},t.exports=f}).call(e,n(9).Buffer,n(0))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return\"[object Array]\"==n.call(t)}},function(t,e,n){var r=n(3).Buffer,i=n(20),o=n(6).EventEmitter;function s(){this._array=new Array(20),this._i=0}n(2)(s,o),s.prototype.write=function(t){return this._array[this._i++]=t,!0},s.prototype.concat=function(){var t,e,n=0,i=new Array(this._array.length),o=this._array,s=0;for(t=0;t<o.length&&void 0!==o[t];t++)\"string\"!==typeof o[t]?i[t]=o[t].length:i[t]=r.byteLength(o[t]),n+=i[t];for(e=r.allocUnsafe(n),t=0;t<o.length&&void 0!==o[t];t++)\"string\"!==typeof o[t]?(o[t].copy(e,s),s+=i[t]):(e.write(o[t],s),s+=i[t]);return e},t.exports=function(t){var e=new s;return i(t,e),e.concat()}},function(t,e,n){e.parser=n(52),e.generate=n(48),e.writeToStream=n(20)},function(t,e,n){var r=n(3).Buffer,i=65536,o={};function s(t){var e=r.allocUnsafe(2);return e.writeUInt8(t>>8,0),e.writeUInt8(255&t,1),e}t.exports={cache:o,generateCache:function(){for(var t=0;t<i;t++)o[t]=s(t)},generateNumber:s}},function(t,e){t.exports=function(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}},function(t,e,n){var r=n(45),i=n(2),o=n(6).EventEmitter,s=n(51),a=n(19);function u(){if(!(this instanceof u))return new u;this._states=[\"_parseHeader\",\"_parseLength\",\"_parsePayload\",\"_newPacket\"],this._resetState()}i(u,o),u.prototype._resetState=function(){this.packet=new s,this.error=null,this._list=r(),this._stateCounter=0},u.prototype.parse=function(t){for(this.error&&this._resetState(),this._list.append(t);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,this._stateCounter>=this._states.length&&(this._stateCounter=0);return this._list.length},u.prototype._parseHeader=function(){var t=this._list.readUInt8(0);return this.packet.cmd=a.types[t>>a.CMD_SHIFT],this.packet.retain=0!==(t&a.RETAIN_MASK),this.packet.qos=t>>a.QOS_SHIFT&a.QOS_MASK,this.packet.dup=0!==(t&a.DUP_MASK),this._list.consume(1),!0},u.prototype._parseLength=function(){for(var t,e=0,n=1,r=0,i=!0;e<5&&(r+=n*((t=this._list.readUInt8(e++))&a.LENGTH_MASK),n*=128,0!==(t&a.LENGTH_FIN_MASK));)if(this._list.length<=e){i=!1;break}return i&&(this.packet.length=r,this._list.consume(e)),i},u.prototype._parsePayload=function(){var t=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case\"connect\":this._parseConnect();break;case\"connack\":this._parseConnack();break;case\"publish\":this._parsePublish();break;case\"puback\":case\"pubrec\":case\"pubrel\":case\"pubcomp\":this._parseMessageId();break;case\"subscribe\":this._parseSubscribe();break;case\"suback\":this._parseSuback();break;case\"unsubscribe\":this._parseUnsubscribe();break;case\"unsuback\":this._parseUnsuback();break;case\"pingreq\":case\"pingresp\":case\"disconnect\":break;default:this._emitError(new Error(\"Not supported\"))}t=!0}return t},u.prototype._parseConnect=function(){var t,e,n,r,i,o,s={},u=this.packet;if(null===(t=this._parseString()))return this._emitError(new Error(\"Cannot parse protocolId\"));if(\"MQTT\"!==t&&\"MQIsdp\"!==t)return this._emitError(new Error(\"Invalid protocolId\"));if(u.protocolId=t,this._pos>=this._list.length)return this._emitError(new Error(\"Packet too short\"));if(u.protocolVersion=this._list.readUInt8(this._pos),3!==u.protocolVersion&&4!==u.protocolVersion)return this._emitError(new Error(\"Invalid protocol version\"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error(\"Packet too short\"));if(s.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,s.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,s.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK,s.will&&(u.will={},u.will.retain=0!==(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),u.will.qos=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT),u.clean=0!==(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK),this._pos++,u.keepalive=this._parseNum(),-1===u.keepalive)return this._emitError(new Error(\"Packet too short\"));if(null===(e=this._parseString()))return this._emitError(new Error(\"Packet too short\"));if(u.clientId=e,s.will){if(null===(n=this._parseString()))return this._emitError(new Error(\"Cannot parse will topic\"));if(u.will.topic=n,null===(r=this._parseBuffer()))return this._emitError(new Error(\"Cannot parse will payload\"));u.will.payload=r}if(s.username){if(null===(o=this._parseString()))return this._emitError(new Error(\"Cannot parse username\"));u.username=o}if(s.password){if(null===(i=this._parseBuffer()))return this._emitError(new Error(\"Cannot parse password\"));u.password=i}return u},u.prototype._parseConnack=function(){var t=this.packet;return this._list.length<2?null:(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&a.SESSIONPRESENT_MASK),t.returnCode=this._list.readUInt8(this._pos),-1===t.returnCode?this._emitError(new Error(\"Cannot parse return code\")):void 0)},u.prototype._parsePublish=function(){var t=this.packet;if(t.topic=this._parseString(),null===t.topic)return this._emitError(new Error(\"Cannot parse topic\"));t.qos>0&&!this._parseMessageId()||(t.payload=this._list.slice(this._pos,t.length))},u.prototype._parseSubscribe=function(){var t,e,n=this.packet;if(1!==n.qos)return this._emitError(new Error(\"Wrong subscribe header\"));if(n.subscriptions=[],this._parseMessageId())for(;this._pos<n.length;){if(null===(t=this._parseString()))return this._emitError(new Error(\"Cannot parse topic\"));e=this._list.readUInt8(this._pos++),n.subscriptions.push({topic:t,qos:e})}},u.prototype._parseSuback=function(){if(this.packet.granted=[],this._parseMessageId())for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))},u.prototype._parseUnsubscribe=function(){var t=this.packet;if(t.unsubscriptions=[],this._parseMessageId())for(;this._pos<t.length;){var e;if(null===(e=this._parseString()))return this._emitError(new Error(\"Cannot parse topic\"));t.unsubscriptions.push(e)}},u.prototype._parseUnsuback=function(){if(!this._parseMessageId())return this._emitError(new Error(\"Cannot parse messageId\"))},u.prototype._parseMessageId=function(){var t=this.packet;return t.messageId=this._parseNum(),null!==t.messageId||(this._emitError(new Error(\"Cannot parse messageId\")),!1)},u.prototype._parseString=function(t){var e,n=this._parseNum(),r=n+this._pos;return-1===n||r>this._list.length||r>this.packet.length?null:(e=this._list.toString(\"utf8\",this._pos,r),this._pos+=n,e)},u.prototype._parseBuffer=function(){var t,e=this._parseNum(),n=e+this._pos;return-1===e||n>this._list.length||n>this.packet.length?null:(t=this._list.slice(this._pos,n),this._pos+=e,t)},u.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var t=this._list.readUInt16BE(this._pos);return this._pos+=2,t},u.prototype._newPacket=function(){return this.packet&&(this._list.consume(this.packet.length),this.emit(\"packet\",this.packet)),this.packet=new s,!0},u.prototype._emitError=function(t){this.error=t,this.emit(\"error\",t)},t.exports=u},function(t,e,n){var r=n(61);function i(t){var e=function e(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function o(t){var e=function e(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||\"Function wrapped with `once`\";return e.onceError=n+\" shouldn't be called more than once\",e.called=!1,e}t.exports=r(i),t.exports.strict=r(o),i.proto=i(function(){Object.defineProperty(Function.prototype,\"once\",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,\"onceStrict\",{value:function(){return o(this)},configurable:!0})})},function(t,e,n){t.exports=n(4)},function(t,e,n){t.exports=o;var r=n(22),i=n(7);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(2),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){var r=n(3).Buffer,i=n(65);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return\"\";for(var e=this.head,n=\"\"+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,o=r.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,n=o,i=a,e.copy(n,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+\" \"+t})},function(t,e,n){t.exports=function(){if(\"function\"!==typeof arguments[0])throw new Error(\"callback needed\");if(\"number\"!==typeof arguments[1])throw new Error(\"interval needed\");var t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new function(t,e,n){var r=this;this._callback=t,this._args=n,this._interval=setInterval(t,e,this._args),this.reschedule=function(t){t||(t=r._interval),r._interval&&clearInterval(r._interval),r._interval=setInterval(r._callback,t,r._args)},this.clear=function(){r._interval&&(clearInterval(r._interval),r._interval=void 0)},this.destroy=function(){r._interval&&clearInterval(r._interval),r._callback=void 0,r._interval=void 0,r._args=void 0}}(arguments[0],arguments[1],t)}},function(t,e){t.exports=function(t){var e=t._readableState;return e?e.objectMode?t.read():t.read((n=e,n.buffer.length?n.buffer.head?n.buffer.head.data.length:n.buffer[0].length:n.length)):null;var n}},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&\"true\"===String(n).toLowerCase()}t.exports=function(t,e){if(n(\"noDeprecation\"))return t;var r=!1;return function(){if(!r){if(n(\"throwDeprecation\"))throw new Error(e);n(\"traceDeprecation\")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(e,n(1))},function(t,e){var n=null;\"undefined\"!==typeof WebSocket?n=WebSocket:\"undefined\"!==typeof MozWebSocket?n=MozWebSocket:\"undefined\"!==typeof d&&(n=d.WebSocket||d.MozWebSocket),t.exports=n},function(t,e){t.exports=function t(e,n){if(e&&n)return t(e)(n);if(\"function\"!==typeof e)throw new TypeError(\"need wrapper function\");Object.keys(e).forEach(function(t){r[t]=e[t]});return r;function r(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),i=t[t.length-1];return\"function\"===typeof r&&r!==i&&Object.keys(i).forEach(function(t){r[t]=i[t]}),r}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){}])},function(t,e,n){\"use strict\";e.__esModule=!0;var r=s(n(60)),i=s(n(79)),o=\"function\"===typeof i.default&&\"symbol\"===typeof r.default?function(t){return typeof t}:function(t){return t&&\"function\"===typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?\"symbol\":typeof t};function s(t){return t&&t.__esModule?t:{default:t}}e.default=\"function\"===typeof i.default&&\"symbol\"===o(r.default)?function(t){return\"undefined\"===typeof t?\"undefined\":o(t)}:function(t){return t&&\"function\"===typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?\"symbol\":\"undefined\"===typeof t?\"undefined\":o(t)}},function(t,e,n){\"use strict\";var r=n(10),i=n(34),o=n(37),s=n(4),a=n(20),u=n(66),c=n(25),h=n(73),f=n(8)(\"iterator\"),l=!([].keys&&\"next\"in[].keys()),d=function(){return this};t.exports=function(t,e,n,p,g,y,m){u(n,e,p);var v,_,b,w=function(t){if(!l&&t in T)return T[t];switch(t){case\"keys\":case\"values\":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+\" Iterator\",E=\"values\"==g,I=!1,T=t.prototype,A=T[f]||T[\"@@iterator\"]||g&&T[g],k=A||w(g),M=g?E?w(\"entries\"):k:void 0,C=\"Array\"==e&&T.entries||A;if(C&&(b=h(C.call(new t)))!==Object.prototype&&b.next&&(c(b,S,!0),r||\"function\"==typeof b[f]||s(b,f,d)),E&&A&&\"values\"!==A.name&&(I=!0,k=function(){return A.call(this)}),r&&!m||!l&&!I&&T[f]||s(T,f,k),a[e]=k,a[S]=d,g)if(v={values:E?k:w(\"values\"),keys:y?k:w(\"keys\"),entries:M},m)for(_ in v)_ in T||o(T,_,v[_]);else i(i.P+i.F*(l||I),e,v);return v}},function(t,e,n){var r=n(1),i=n(11),o=n(64),s=n(4),a=n(2),u=function(t,e,n){var c,h,f,l=t&u.F,d=t&u.G,p=t&u.S,g=t&u.P,y=t&u.B,m=t&u.W,v=d?i:i[e]||(i[e]={}),_=v.prototype,b=d?r:p?r[e]:(r[e]||{}).prototype;for(c in d&&(n=e),n)(h=!l&&b&&void 0!==b[c])&&a(v,c)||(f=h?b[c]:n[c],v[c]=d&&\"function\"!=typeof b[c]?n[c]:y&&h?o(f,r):m&&b[c]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):g&&\"function\"==typeof f?o(Function.call,f):f,g&&((v.virtual||(v.virtual={}))[c]=f,t&u.R&&_&&!_[c]&&s(_,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){t.exports=!n(6)&&!n(13)(function(){return 7!=Object.defineProperty(n(36)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(t,e,n){var r=n(9),i=n(1).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){t.exports=n(4)},function(t,e,n){var r=n(12),i=n(67),o=n(24),s=n(22)(\"IE_PROTO\"),a=function(){},u=function(){var t,e=n(36)(\"iframe\"),r=o.length;for(e.style.display=\"none\",n(72).appendChild(e),e.src=\"javascript:\",(t=e.contentWindow.document).open(),t.write(\"<script>document.F=Object<\\/script>\"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(2),i=n(7),o=n(69)(!1),s=n(22)(\"IE_PROTO\");t.exports=function(t,e){var n,a=i(t),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(39),i=n(24).concat(\"length\",\"prototype\");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){\"use strict\";var r=n(0);r.bridge,r.bridge;!function(){for(var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o=\"\";for(n=0;n<i;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return i%3===2?o=o.substring(0,o.length-1)+\"=\":i%3===1&&(o=o.substring(0,o.length-2)+\"==\"),o},e.decode=function(t){var e,r,i,o,s,a=.75*t.length,u=t.length,c=0;\"=\"===t[t.length-1]&&(a--,\"=\"===t[t.length-2]&&a--);var h=new ArrayBuffer(a),f=new Uint8Array(h);for(e=0;e<u;e+=4)r=n[t.charCodeAt(e)],i=n[t.charCodeAt(e+1)],o=n[t.charCodeAt(e+2)],s=n[t.charCodeAt(e+3)],f[c++]=r<<2|i>>4,f[c++]=(15&i)<<4|o>>2,f[c++]=(3&o)<<6|63&s;return h}}()},function(t,e,n){t.exports=n(45)},function(t,e,n){\"use strict\";function r(){n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(92)}n(46),n(47),self.bootstrapApp?self.bootstrapApp({success:r}):r()},function(t,e,n){\"use strict\";(function(t){var e=\"undefined\"!==typeof t?t:self;e.appXRuntimeConfig={},e.appXAppJson={app:{$homepage:\"pages/index/index\"}}}).call(this,n(29))},function(t,e,n){\"use strict\";importScripts(\"https://appx/af-appx.worker.min.js\")},function(t,e,n){\"use strict\";var r=n(0),i=(r.bridge,r.bridge);(0,r.App)({onLaunch:function(t){console.info(\"App onLaunch\"),t.query&&t.query.IMEI&&i.setStorageSync({key:\"IMEI\",data:t.query.IMEI})},onShow:function(t){},globalData:{userInfo:null}})},function(t,e,n){\"use strict\";n.r(e);var r=n(0),i=r.WorkerComponent||function(){};r.bridge,r.bridge;r.$global.currentComponentConfig={is:\"/node_modules/mini-antui/es/list/index\",usingComponents:{}},i({props:{className:\"\"}})},function(t,e,n){\"use strict\";n.r(e);var r=n(0),i=r.WorkerComponent||function(){};r.bridge,r.bridge;r.$global.currentComponentConfig={is:\"/node_modules/mini-antui/es/list/list-item/index\",usingComponents:{}},i({props:{className:\"\",align:!1,disabled:!1,multipleLine:!1,wrap:!1},didMount:function(){for(var t in this.dataset={},this.props)/data-/gi.test(t)&&(this.dataset[t.replace(/data-/gi,\"\")]=this.props[t])},methods:{onItemTap:function(t){var e=this.props,n=e.onClick,r=e.disabled;n&&!r&&n({index:t.target.dataset.index,target:{dataset:this.dataset}})}}})},function(t,e,n){\"use strict\";var r,i=n(0),o=n(16);(r=o)&&r.__esModule;i.bridge;var s=i.bridge;i.$global.currentPageConfig={pagePath:\"pages/index/index\",usingComponents:{}};var a=(0,i.getApp)(),u=n(3);(0,i.Page)({data:{userInfo:{avatar:\"/img/personal_head.png\",phone:13750846912},windowHeight:600,scale:15,currentPos:{latitude:30.16964,longitude:121.26647},show:!0,markers:[],interval:null},getSystemInfoPage:function(){var t=this;s.getSystemInfo({success:function(e){console.log(e.windowWidth),console.log(e.windowHeight),t.data.userInfo.avatar,t.setData({controls:[{id:0,iconPath:\"/img/index-user.png\",position:{left:e.windowWidth-60,top:20,width:60,height:60},clickable:!1},{id:1,iconPath:\"/img/index-location.png\",position:{left:10,top:e.windowHeight-80,width:60,height:60},clickable:!0},{id:2,iconPath:\"/img/index-scan.png\",position:{left:e.windowWidth/2-60,top:e.windowHeight-120,width:120,height:120},clickable:!0},{id:3,iconPath:\"/img/index-help.png\",position:{left:e.windowWidth-70,top:e.windowHeight-80,width:60,height:60},clickable:!0},{id:4,iconPath:t.data.userInfo.avatar,position:{left:e.windowWidth-50,top:29,width:40,height:40},clickable:!0}]})}})},controltap:function(t){1===t.controlId?this.showPos():2===t.controlId?this.scanCode():3===t.controlId?this.help():4===t.controlId&&this.toPerson()},showPos:function(){null.data.mapCtx.moveToLocation()},toPerson:function(){s.navigateTo({url:\"../personalCenter/personalCenter\"})},help:function(){s.navigateTo({url:\"../help/help\"})},scanCode:function(){var t=this;s.scan({type:\"qr\",success:function(e){var n=e.code,r=n.indexOf(\"?\"),i=t.getQueryString(n.slice(r)).IMEI;s.setStorageSync({key:\"IMEI\",data:i}),setTimeout(s.reLaunch({url:\"../port/port\"}),500)}})},getQueryString:function(t){for(var e=t.substr(1),n={},r=e.length?e.split(\"&\"):[],i=null,o=r.length,s=0;s<o;s++){i=r[s].split(\"=\");var a=decodeURIComponent(i[0]),u=decodeURIComponent(i[1]);a&&(n[a]=u)}return n},onLoad:function(t){console.info(\"Page onLoad with query: \"+JSON.stringify(t)),this.getAccessToken(),this.getSystemInfoPage()},onReady:function(){var t=this,e=this;e.data.mapCtx=s.createMapContext(\"map\"),s.getLocation({type:\"wgs84\",success:function(t){e.setData({\"currentPos.longitude\":t.longitude,\"currentPos.latitude\":t.latitude})}}),null==s.getStorageSync({key:\"access_token\"}).data?e.getAccessToken():(u.get(\"/pile/listAllPile\",{}).then(function(e){for(var n=e.list,r=[],i=n.length-1;i>=0;i--){var o={id:i+1,latitude:n[i].gpsLat,longitude:n[i].gpsLng,name:n[i].address,iconPath:\"/img/home-location.png\",width:28,height:36};r.push(o)}t.setData({markers:r})}).catch(function(t){console.log(t)}),u.get(\"/charging/current/chargedList\",{}).then(function(t){console.log(\"chargedList\",t),s.reLaunch({url:\"/pages/chargeState/chargeState\"}),s.setStorageSync({key:\"chargeList\",data:t})}).catch(function(t){}))},getAccessToken:function(){var t=this;s.getAuthCode({scopes:\"auth_user\",fail:function(t){console.error(\"getAuthCode\",t)},success:function(e){s.getAuthUserInfo({fail:function(t){console.error(\"getAuthUserInfo\",t)},success:function(n){u.post(\"/login/auth\",{code:\"\"+e.authCode,oAuthType:\"alipay\"}).then(function(t){s.setStorageSync({key:\"access_token\",data:t.access_token}),s.setStorageSync({key:\"userId\",data:t.userId}),s.setStorageSync({key:\"openid\",data:t.openid}),a.globalData.userInfo=n,a.globalData.userInfo.userId=t.userId,console.log(t)}).catch(function(t){console.log(t)}),t.setData({userInfo:n,hasUserInfo:!0})}})}})},onShow:function(){null!=this.data.interval&&clearInterval(this.data.interval),s.hideLoading()},onHide:function(){},onUnload:function(){},onTitleClick:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){return{title:\"My App\",desc:\"My App description\",path:\"pages/index/index\"}}})},function(t,e,n){\"use strict\";var r=n(0),i=(r.bridge,r.bridge);r.$global.currentPageConfig={pagePath:\"pages/personalCenter/personalCenter\",usingComponents:{list:\"/node_modules/mini-antui/es/list/index\",\"list-item\":\"/node_modules/mini-antui/es/list/list-item/index\"}};n(3);var o=(0,r.getApp)();(0,r.Page)({data:{items:[{orderType:\"1\",paidAmount:\"2.00\\u5143\",createTime:\"2018-08-29 15:30:00\",paymentId:\"1\"},{orderType:\"2\",paidAmount:\"2.00\\u5143\",createTime:\"2018-08-29 15:30:00\",paymentId:\"2\"}],userInfo:{avatar:\"/img/personal_head.png\",phone:\"13750846912\",nickName:\"Carpe Diem\"},itemsThumb:[{thumb:\"/img/recharge.png\",title:\"\\u4ea4\\u6613\\u660e\\u7ec6\",arrow:!0}]},onLoad:function(){console.log(o.globalData.userInfo),this.setData({userInfo:o.globalData.userInfo})},toRechargeRecord:function(){i.navigateTo({url:\"../rechargeRecord/rechargeRecord\"})}})},function(t,e,n){\"use strict\";var r=n(0),i=(r.bridge,r.bridge);r.$global.currentPageConfig={pagePath:\"pages/help/help\",usingComponents:{}},(0,r.Page)({data:{tabs:[\"\\u4f7f\\u7528\\u6307\\u5357\",\"\\u5e38\\u89c1\\u95ee\\u9898\"],stv:{windowWidth:0,lineWidth:0,offset:0,tStart:!1},activeTab:0},onLoad:function(){try{var t=this.data.tabs,e=i.getSystemInfoSync();this.windowWidth=e.windowWidth,this.data.stv.lineWidth=this.windowWidth/this.data.tabs.length,this.data.stv.windowWidth=e.windowWidth,this.setData({stv:this.data.stv}),this.tabsCount=t.length}catch(t){}},handlerStart:function(t){var e=t.touches[0],n=e.clientX,r=e.clientY;this.startX=n,this.tapStartX=n,this.tapStartY=r,this.data.stv.tStart=!0,this.tapStartTime=t.timeStamp,this.setData({stv:this.data.stv})},handlerMove:function(t){var e=t.touches[0],n=e.clientX,r=(e.clientY,this.data.stv),i=this.startX-n;this.startX=n,r.offset+=i,r.offset<=0?r.offset=0:r.offset>=r.windowWidth*(this.tabsCount-1)&&(r.offset=r.windowWidth*(this.tabsCount-1)),this.setData({stv:r})},handlerCancel:function(t){},handlerEnd:function(t){var e=t.changedTouches[0],n=e.clientX,r=e.clientY,i=t.timeStamp,o=this.data,s=(o.tabs,o.stv),a=o.activeTab,u=s.offset,c=s.windowWidth;if(i-this.tapStartTime<=300)if(Math.abs(this.tapStartY-r)<50)this.tapStartX-n>5?a<this.tabsCount-1&&this.setData({activeTab:++a}):a>0&&this.setData({activeTab:--a}),s.offset=s.windowWidth*a;else{var h=Math.round(u/c);a!=h&&this.setData({activeTab:h}),s.offset=s.windowWidth*h}else{var f=Math.round(u/c);a!=f&&this.setData({activeTab:f}),s.offset=s.windowWidth*f}s.tStart=!1,this.setData({stv:this.data.stv})},_updateSelectedPage:function(t){var e=this.data,n=(e.tabs,e.stv),r=e.activeTab;r=t,this.setData({activeTab:r}),n.offset=n.windowWidth*r,this.setData({stv:this.data.stv})},handlerTabTap:function(t){this._updateSelectedPage(t.currentTarget.dataset.index)}})},function(t,e,n){\"use strict\";var r=n(0),i=(r.bridge,r.bridge);r.$global.currentPageConfig={pagePath:\"pages/rechargeRecord/rechargeRecord\",usingComponents:{list:\"/node_modules/mini-antui/es/list/index\",\"list-item\":\"/node_modules/mini-antui/es/list/list-item/index\"}};var o=n(3),s=(0,r.getApp)();(0,r.Page)({data:{items:[]},toDetail:function(t){console.log(t),i.navigateTo({url:\"../rechargeDetail/rechargeDetail?orderId=\"+this.data.items[t.index].orderId})},onLoad:function(){var t=this;o.post(\"/order/getOrderList\",{userId:s.globalData.userInfo.userId}).then(function(e){console.log(e),t.setData({items:e}),console.log(\"\\u83b7\\u53d6\\u4ea4\\u6613\\u660e\\u7ec6\\u6210\\u529f\")}).catch(function(t){console.log(\"\\u83b7\\u53d6\\u4ea4\\u6613\\u660e\\u7ec6\\u6210\\u529f\"),console.log(t)})}})},function(t,e,n){\"use strict\";var r=n(0);r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"pages/rechargeDetail/rechargeDetail\",usingComponents:{}};var i=n(3);(0,r.Page)({data:{address:\"\\u9999\\u683c\\u5927\\u53a6\",paidAmount:10,paymentTime:\"2018-09-08 10.30\",paymentId:2,isPay:1,chargeTime:\"1\\u5c0f\\u65f632\\u5206\\u949f\",electricity:\"1000\"},onLoad:function(t){var e=this,n=t.orderId;console.log(n),i.post(\"/charging/getOrderChargedList\",{orderId:n}).then(function(t){console.log(t),e.setData({address:t.address,paidAmount:t.paidAmount,paymentTime:t.paymentTime,paymentId:t.paymentId,isPay:t.isPay,electricity:t.electricity}),console.log(\"\\u83b7\\u53d6\\u4ea4\\u6613\\u660e\\u7ec6\\u6210\\u529f\")}).catch(function(t){console.log(\"\\u83b7\\u53d6\\u4ea4\\u6613\\u660e\\u7ec6\\u5931\\u8d25\"),console.log(t)})}})},function(t,e,n){\"use strict\";(function(t){var e,r=n(0),i=n(16),o=(e=i)&&e.__esModule?e:{default:e};r.bridge;var s=r.bridge;r.$global.currentPageConfig={pagePath:\"pages/port/port\",usingComponents:{list:\"/node_modules/mini-antui/es/list/index\",\"list-item\":\"/node_modules/mini-antui/es/list/list-item/index\"}};var a,u=n(3),c=n(31),h=(n(90),null);(0,r.Page)({data:{items:[{portId:0,status:99,value:\"1\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:1,status:99,value:\"2\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:2,status:99,value:\"3\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:3,status:99,value:\"4\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:4,status:99,value:\"5\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:5,status:99,value:\"6\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:6,status:99,value:\"7\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:7,status:99,value:\"8\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:8,status:99,value:\"9\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:9,status:99,value:\"10\\u53f7\\u5145\\u7535\\u53e3\",checked:!1}],portId:null,IMEI:null,buttonClicked:null,getStatus:!1,openPortId:null,interval:null,timer:null,startLoading:!1,alert:!1,form:null,client:null},showStartLoading:function(){s.showLoading({content:\"\\u5f00\\u542f\\u4e2d...\"})},cancelStartLoading:function(){s.hideLoading()},onShow:function(){var e=this;null!=this.data.client&&e.data.client.end(),this.setData({items:[{portId:0,status:99,value:\"0\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:1,status:99,value:\"1\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:2,status:99,value:\"2\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:3,status:99,value:\"3\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:4,status:99,value:\"4\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:5,status:99,value:\"5\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:6,status:99,value:\"6\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:7,status:99,value:\"7\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:8,status:99,value:\"8\\u53f7\\u5145\\u7535\\u53e3\",checked:!1},{portId:9,status:99,value:\"9\\u53f7\\u5145\\u7535\\u53e3\",checked:!1}],client:null});var n=s.getStorageSync({key:\"IMEI\"}).data;this.setData({IMEI:n}),null!=a?(a.end(),a=c.connect(\"mys://admin:Xr7891122@www.p99.store:8099/mqtt\")):a=c.connect(\"mys://admin:Xr7891122@www.p99.store:8099/mqtt\");var i=\"charge/\"+n+\"/SendAllData\",o=\"charge/\"+n+\"/OpenNum\",f=\"charge/\"+n+\"/OpenOkNum\",l=this.sendAllData(!0),d=new t(l);a.publish(o,d),a.subscribe(i),a.subscribe(f),a.on(\"message\",function(n,r){if(n==i)e.readDataTransferCmd(r);else if(n==f){var u=e.data.openPortId,c=s.getStorageSync({key:\"userId\"}).data;256*r[7]+r[8]==c&&r[5]==u&&(0==r[6]?(clearInterval(h),clearTimeout(e.timer),e.startSuccess(u)):(e.cancelStartLoading(),clearTimeout(e.timer),s.alert({content:\"\\u5f00\\u542f\\u5145\\u7535\\u5668\\u5931\\u8d25\\uff0c\\u8bf7\\u5148\\u8fde\\u63a5\\u5145\\u7535\\u5668\",showCancel:!1,success:function(n){if(!e.data.getStatus){var r=e.sendAllData(!1),i=new t(r);a.publish(o,i),setTimeout(function(){s.showLoading({content:\"\\u52a0\\u8f7d\\u4e2d\"})},100)}}}),e.setData({openPortId:null})))}}),h=setInterval(function(){if(console.log(\"66666\"),null!=a?(a.end(),a=c.connect(\"mys://admin:Xr7891122@www.p99.store:8099/mqtt\")):a=c.connect(\"mys://admin:Xr7891122@www.p99.store:8099/mqtt\"),a.subscribe(i),a.subscribe(f),a.on(\"message\",function(n,r){if(n==i)e.readDataTransferCmd(r);else if(n==f){var u=e.data.openPortId,c=s.getStorageSync({key:\"userId\"}).data;256*r[7]+r[8]==c&&r[5]==u&&(0==r[6]?(clearInterval(h),clearTimeout(e.timer),e.startSuccess(u)):(e.cancelStartLoading(),clearTimeout(e.timer),s.alert({content:\"\\u5f00\\u542f\\u5145\\u7535\\u5668\\u5931\\u8d25\\uff0c\\u8bf7\\u5148\\u8fde\\u63a5\\u5145\\u7535\\u5668\",showCancel:!1,success:function(n){if(!e.data.getStatus){var r=e.sendAllData(!1),i=new t(r);a.publish(o,i),setTimeout(function(){s.showLoading({content:\"\\u52a0\\u8f7d\\u4e2d\"})},100)}}}),e.setData({openPortId:null})))}}),u.get(\"/charging/current/chargedList\",{}).then(function(t){s.reLaunch({url:\"/pages/chargeState/chargeState\"}),s.setStorageSync({key:\"chargeList\",data:t})}).catch(function(t){console.log(t)}),console.log(\"77777\"),!e.data.getStatus){var n=e.sendAllData(!1),r=new t(n);console.log(\"22222\"),console.log(a),a.publish(o,r)}},4e3),console.log(\"33333\");var p=(0,r.getCurrentPages)(),g=p[p.length-2];null!=g&&g.setData({interval:h}),console.log(\"44444\"),setTimeout(function(){s.showLoading({content:\"\\u52a0\\u8f7d\\u4e2d\"})},500),console.log(\"55555\")},openOkNum:function(t){var e=new Array(9);e[0]=60,e[1]=0,e[2]=81,e[3]=240,e[4]=9,e[5]=3,e[6]=t,e[7]=0;var n=255&e[0]+e[1]+e[2]+e[3]+e[4]+e[5]+e[6]+e[7];return e[8]=n,e[9]=70,e},radioChange:function(t){for(var e=this.data.items,n=0;n<e.length;n++)n==t.detail.value?e[n].checked=!0:e[n].checked=!1;this.setData({items:e,portId:t.detail.value})},sendAllData:function(t){var e=new Array(9);e[0]=60,e[1]=0,e[2]=81,e[3]=240,e[4]=9,e[5]=1,e[6]=0,e[7]=t?1:0;var n=255&e[0]+e[1]+e[2]+e[3]+e[4]+e[5]+e[6]+e[7];return e[8]=n,e[9]=70,e},startSuccess:function(t){var e=this.data.IMEI,n=this.data.formId;u.post(\"/charging/start\",{IMEI:e,portId:t,formId:n}).then(function(t){u.get(\"/charging/current/chargedList\",{}).then(function(t){console.log(t),setTimeout(function(){s.reLaunch({url:\"/pages/chargeState/chargeState\"})},200),s.setStorageSync({key:\"chargeList\",data:t})}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)})},startCharge:function(){var e;null!=(n=this).data.client?e=n.data.client:(e=c.connect(\"mys://admin:Xr7891122@www.p99.store:8099/mqtt\"),n.setData({client:e}));var n=this;this.timer=setTimeout(function(){n.cancelStartLoading(),s.alert({content:\"\\u5f00\\u542f\\u5145\\u7535\\u5668\\u8d85\\u65f6,\\u8bf7\\u91cd\\u8bd5\",success:function(i){var o=\"charge/\"+r+\"/OpenNum\",s=n.sendAllData(!1),a=new t(s);console.log(e),e.publish(o,a)}})},4e4);var r=s.getStorageSync({key:\"IMEI\"}).data;if(null!=n.data.portId&&null!=r){var i=n.data.portId,a=s.getStorageSync({key:\"userId\"}).data;if(!n.data.buttonClicked){o.default.buttonClicked(n),n.showStartLoading(),n.setData({openPortId:i});var u=\"charge/\"+r+\"/OpenNum\",h=n.openNum(i,a),f=new t(h);e.publish(u,f)}}else s.showToast({content:\"\\u8bf7\\u5148\\u9009\\u62e9\\u5145\\u7535\\u53e3\",icon:\"success\",duration:2e3})},openState:function(t){return 0==t[6]},openNum:function(t,e){console.log(e);var n=new Array(9);n[0]=60,n[1]=0,n[2]=81,n[3]=240,n[4]=9,n[5]=3,n[6]=parseInt(t),n[7]=parseInt(e/256),n[8]=parseInt(e%256),console.log(parseInt(e/256)),console.log(parseInt(e%256)),n[9]=0,n[10]=0;var r=255&n[0]+n[1]+n[2]+n[3]+n[4]+n[5]+n[6]+n[7]+n[8]+n[9]+n[10];return n[11]=r,n[12]=70,console.log(n),n},readDataTransferCmd:function(t){var e=255&t[0]+t[1]+t[2]+t[3]+t[4]+t[5]+t[6]+t[7]+t[8]+t[9]+t[10]+t[11]+t[12]+t[13]+t[14];if(26==t[0]&&0==t[1]&&81==t[2]&&240==t[3]&&10==t[4]&&e===t[15]&&70==t[16]){t[4];for(var n=t[5],r=new Array(8),i=0;i<8;i++)r[i]=(n&Math.pow(2,i))>>i;var o=\"\"+r[7]+r[6],a=this.data.items;a[0].status=o;var u=t[6],c=new Array(8);for(i=0;i<8;i++)c[i]=(u&Math.pow(2,i))>>i;var f=\"\"+c[7]+c[6];a[1].status=f;var l=t[7],d=new Array(8);for(i=0;i<8;i++)d[i]=(l&Math.pow(2,i))>>i;var p=\"\"+d[7]+d[6];a[2].status=p;var g=t[8],y=new Array(8);for(i=0;i<8;i++)y[i]=(g&Math.pow(2,i))>>i;var m=\"\"+y[7]+y[6];a[3].status=m;var v=t[9],_=new Array(8);for(i=0;i<8;i++)_[i]=(v&Math.pow(2,i))>>i;var b=\"\"+_[7]+_[6];a[4].status=b;var w=t[10],S=new Array(8);for(i=0;i<8;i++)S[i]=(w&Math.pow(2,i))>>i;var E=\"\"+S[7]+S[6];a[5].status=E;var I=t[11],T=new Array(8);for(i=0;i<8;i++)T[i]=(I&Math.pow(2,i))>>i;var A=\"\"+T[7]+T[6];a[6].status=A;var k=t[12],M=new Array(8);for(i=0;i<8;i++)M[i]=(k&Math.pow(2,i))>>i;var C=\"\"+M[7]+M[6];a[7].status=C;var P=t[13],O=new Array(8);for(i=0;i<8;i++)O[i]=(P&Math.pow(2,i))>>i;var R=\"\"+O[7]+O[6];a[8].status=R;var x=t[14],L=new Array(8);for(i=0;i<8;i++)L[i]=(x&Math.pow(2,i))>>i;var U=\"\"+L[7]+L[6];a[9].status=U;for(var N=0;N<a.length;N++)N==this.data.portId?a[N].checked=!0:a[N].checked=!1;this.setData({items:a,getStatus:!0}),clearInterval(h),s.hideLoading()}},onUnload:function(){a=null,s.hideLoading(),clearInterval(h),clearTimeout(null)},onHide:function(){}})}).call(this,n(30).Buffer)},function(t,e,n){\"use strict\";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=c(t),r=n[0],s=n[1],a=new o(function(t,e,n){return 3*(e+n)/4-n}(0,r,s)),u=0,h=s>0?r-4:r,f=0;f<h;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;2===s&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,a[u++]=255&e);1===s&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(h(t,s,s+16383>a?a:s+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+\"==\")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+\"=\"));return o.join(\"\")};for(var r=[],i=[],o=\"undefined\"!==typeof Uint8Array?Uint8Array:Array,s=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var n=t.indexOf(\"=\");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function h(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join(\"\")}i[\"-\".charCodeAt(0)]=62,i[\"_\".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,h=-7,f=n?i-1:0,l=n?-1:1,d=t[e+f];for(f+=l,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=256*o+t[e+f],f+=l,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+t[e+f],f+=l,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,f=h>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?l/u:l*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+d]=255&s,d+=p,s/=256,c-=8);t[n+d-p]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return\"[object Array]\"==n.call(t)}},function(t,e,n){t.exports={default:n(61),__esModule:!0}},function(t,e,n){n(62),n(75),t.exports=n(26).f(\"iterator\")},function(t,e,n){\"use strict\";var r=n(63)(!0);n(33)(String,\"String\",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(17),i=n(18);t.exports=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),c=a.length;return u<0||u>=c?t?\"\":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(t,e,n){var r=n(65);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},function(t,e,n){\"use strict\";var r=n(38),i=n(14),o=n(25),s={};n(4)(s,n(8)(\"iterator\"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+\" Iterator\")}},function(t,e,n){var r=n(5),i=n(12),o=n(21);t.exports=n(6)?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),a=s.length,u=0;a>u;)r.f(t,n=s[u++],e[n]);return t}},function(t,e,n){var r=n(40);t.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==r(t)?t.split(\"\"):Object(t)}},function(t,e,n){var r=n(7),i=n(70),o=n(71);t.exports=function(t){return function(e,n,s){var a,u=r(e),c=i(u.length),h=o(s,c);if(t&&n!=n){for(;c>h;)if((a=u[h++])!=a)return!0}else for(;c>h;h++)if((t||h in u)&&u[h]===n)return t||h||0;return!t&&-1}}},function(t,e,n){var r=n(17),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(17),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(1).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(2),i=n(74),o=n(22)(\"IE_PROTO\"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var r=n(18);t.exports=function(t){return Object(r(t))}},function(t,e,n){n(76);for(var r=n(1),i=n(4),o=n(20),s=n(8)(\"toStringTag\"),a=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),u=0;u<a.length;u++){var c=a[u],h=r[c],f=h&&h.prototype;f&&!f[s]&&i(f,s,c),o[c]=o.Array}},function(t,e,n){\"use strict\";var r=n(77),i=n(78),o=n(20),s=n(7);t.exports=n(33)(Array,\"Array\",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,\"keys\"==e?n:\"values\"==e?t[n]:[n,t[n]])},\"values\"),o.Arguments=o.Array,r(\"keys\"),r(\"values\"),r(\"entries\")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){t.exports={default:n(80),__esModule:!0}},function(t,e,n){n(81),n(87),n(88),n(89),t.exports=n(11).Symbol},function(t,e,n){\"use strict\";var r=n(1),i=n(2),o=n(6),s=n(34),a=n(37),u=n(82).KEY,c=n(13),h=n(23),f=n(25),l=n(15),d=n(8),p=n(26),g=n(27),y=n(83),m=n(84),v=n(12),_=n(9),b=n(7),w=n(19),S=n(14),E=n(38),I=n(85),T=n(86),A=n(5),k=n(21),M=T.f,C=A.f,P=I.f,O=r.Symbol,R=r.JSON,x=R&&R.stringify,L=d(\"_hidden\"),U=d(\"toPrimitive\"),N={}.propertyIsEnumerable,D=h(\"symbol-registry\"),B=h(\"symbols\"),j=h(\"op-symbols\"),q=Object.prototype,F=\"function\"==typeof O,Y=r.QObject,W=!Y||!Y.prototype||!Y.prototype.findChild,V=o&&c(function(){return 7!=E(C({},\"a\",{get:function(){return C(this,\"a\",{value:7}).a}})).a})?function(t,e,n){var r=M(q,e);r&&delete q[e],C(t,e,n),r&&t!==q&&C(q,e,r)}:C,K=function(t){var e=B[t]=E(O.prototype);return e._k=t,e},H=F&&\"symbol\"==typeof O.iterator?function(t){return\"symbol\"==typeof t}:function(t){return t instanceof O},z=function(t,e,n){return t===q&&z(j,e,n),v(t),e=w(e,!0),v(n),i(B,e)?(n.enumerable?(i(t,L)&&t[L][e]&&(t[L][e]=!1),n=E(n,{enumerable:S(0,!1)})):(i(t,L)||C(t,L,S(1,{})),t[L][e]=!0),V(t,e,n)):C(t,e,n)},Q=function(t,e){v(t);for(var n,r=y(e=b(e)),i=0,o=r.length;o>i;)z(t,n=r[i++],e[n]);return t},G=function(t){var e=N.call(this,t=w(t,!0));return!(this===q&&i(B,t)&&!i(j,t))&&(!(e||!i(this,t)||!i(B,t)||i(this,L)&&this[L][t])||e)},J=function(t,e){if(t=b(t),e=w(e,!0),t!==q||!i(B,e)||i(j,e)){var n=M(t,e);return!n||!i(B,e)||i(t,L)&&t[L][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=P(b(t)),r=[],o=0;n.length>o;)i(B,e=n[o++])||e==L||e==u||r.push(e);return r},X=function(t){for(var e,n=t===q,r=P(n?j:b(t)),o=[],s=0;r.length>s;)!i(B,e=r[s++])||n&&!i(q,e)||o.push(B[e]);return o};F||(a((O=function(){if(this instanceof O)throw TypeError(\"Symbol is not a constructor!\");var t=l(arguments.length>0?arguments[0]:void 0),e=function(n){this===q&&e.call(j,n),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),V(this,t,S(1,n))};return o&&W&&V(q,t,{configurable:!0,set:e}),K(t)}).prototype,\"toString\",function(){return this._k}),T.f=J,A.f=z,n(42).f=I.f=$,n(28).f=G,n(41).f=X,o&&!n(10)&&a(q,\"propertyIsEnumerable\",G,!0),p.f=function(t){return K(d(t))}),s(s.G+s.W+s.F*!F,{Symbol:O});for(var Z=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),tt=0;Z.length>tt;)d(Z[tt++]);for(var et=k(d.store),nt=0;et.length>nt;)g(et[nt++]);s(s.S+s.F*!F,\"Symbol\",{for:function(t){return i(D,t+=\"\")?D[t]:D[t]=O(t)},keyFor:function(t){if(!H(t))throw TypeError(t+\" is not a symbol!\");for(var e in D)if(D[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!F,\"Object\",{create:function(t,e){return void 0===e?E(t):Q(E(t),e)},defineProperty:z,defineProperties:Q,getOwnPropertyDescriptor:J,getOwnPropertyNames:$,getOwnPropertySymbols:X}),R&&s(s.S+s.F*(!F||c(function(){var t=O();return\"[null]\"!=x([t])||\"{}\"!=x({a:t})||\"{}\"!=x(Object(t))})),\"JSON\",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(_(e)||void 0!==t)&&!H(t))return m(e)||(e=function(t,e){if(\"function\"==typeof n&&(e=n.call(this,t,e)),!H(e))return e}),r[1]=e,x.apply(R,r)}}),O.prototype[U]||n(4)(O.prototype,U,O.prototype.valueOf),f(O,\"Symbol\"),f(Math,\"Math\",!0),f(r.JSON,\"JSON\",!0)},function(t,e,n){var r=n(15)(\"meta\"),i=n(9),o=n(2),s=n(5).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(13)(function(){return u(Object.preventExtensions({}))}),h=function(t){s(t,r,{value:{i:\"O\"+ ++a,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return\"symbol\"==typeof t?t:(\"string\"==typeof t?\"S\":\"P\")+t;if(!o(t,r)){if(!u(t))return\"F\";if(!e)return\"E\";h(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;h(t)}return t[r].w},onFreeze:function(t){return c&&f.NEED&&u(t)&&!o(t,r)&&h(t),t}}},function(t,e,n){var r=n(21),i=n(41),o=n(28);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var s,a=n(t),u=o.f,c=0;a.length>c;)u.call(t,s=a[c++])&&e.push(s);return e}},function(t,e,n){var r=n(40);t.exports=Array.isArray||function(t){return\"Array\"==r(t)}},function(t,e,n){var r=n(7),i=n(42).f,o={}.toString,s=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&\"[object Window]\"==o.call(t)?function(t){try{return i(t)}catch(t){return s.slice()}}(t):i(r(t))}},function(t,e,n){var r=n(28),i=n(14),o=n(7),s=n(19),a=n(2),u=n(35),c=Object.getOwnPropertyDescriptor;e.f=n(6)?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e){},function(t,e,n){n(27)(\"asyncIterator\")},function(t,e,n){n(27)(\"observable\")},function(t,e,n){\"use strict\";(function(t){var r,i,o,s=n(32),a=(o=s)&&o.__esModule?o:{default:o},u=n(0);u.bridge;var c,h=u.bridge,f=n(43);c=function(){return function(t){var e={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},n=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){if(!e.hasOwnProperty(n)){var r=\"Unknown property, \"+n+\". Valid properties are:\";for(var o in e)e.hasOwnProperty(o)&&(r=r+\" \"+o);throw new Error(r)}if((0,a.default)(t[n])!==e[n])throw new Error(s(i.INVALID_TYPE,[(0,a.default)(t[n]),n]))}},r=function(t,e){return function(){return t.apply(e,arguments)}},i={OK:{code:0,text:\"AMQJSC0000I OK.\"},CONNECT_TIMEOUT:{code:1,text:\"AMQJSC0001E Connect timed out.\"},SUBSCRIBE_TIMEOUT:{code:2,text:\"AMQJS0002E Subscribe timed out.\"},UNSUBSCRIBE_TIMEOUT:{code:3,text:\"AMQJS0003E Unsubscribe timed out.\"},PING_TIMEOUT:{code:4,text:\"AMQJS0004E Ping timed out.\"},INTERNAL_ERROR:{code:5,text:\"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}\"},CONNACK_RETURNCODE:{code:6,text:\"AMQJS0006E Bad Connack return code:{0} {1}.\"},SOCKET_ERROR:{code:7,text:\"AMQJS0007E Socket error:{0}.\"},SOCKET_CLOSE:{code:8,text:\"AMQJS0008I Socket closed.\"},MALFORMED_UTF:{code:9,text:\"AMQJS0009E Malformed UTF data:{0} {1} {2}.\"},UNSUPPORTED:{code:10,text:\"AMQJS0010E {0} is not supported by this browser.\"},INVALID_STATE:{code:11,text:\"AMQJS0011E Invalid state {0}.\"},INVALID_TYPE:{code:12,text:\"AMQJS0012E Invalid type {0} for {1}.\"},INVALID_ARGUMENT:{code:13,text:\"AMQJS0013E Invalid argument {0} for {1}.\"},UNSUPPORTED_OPERATION:{code:14,text:\"AMQJS0014E Unsupported operation.\"},INVALID_STORED_DATA:{code:15,text:\"AMQJS0015E Invalid data in local storage key={0} value={1}.\"},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:\"AMQJS0016E Invalid MQTT message type {0}.\"},MALFORMED_UNICODE:{code:17,text:\"AMQJS0017E Malformed Unicode string:{0} {1}.\"},BUFFER_FULL:{code:18,text:\"AMQJS0018E Message buffer is full, maximum buffer size: {0}.\"}},o={0:\"Connection Accepted\",1:\"Connection Refused: unacceptable protocol version\",2:\"Connection Refused: identifier rejected\",3:\"Connection Refused: server unavailable\",4:\"Connection Refused: bad user name or password\",5:\"Connection Refused: not authorized\"},s=function(t,e){var n=t.text;if(e)for(var r,i,o=0;o<e.length;o++)if(r=\"{\"+o+\"}\",(i=n.indexOf(r))>0){var s=n.substring(0,i),a=n.substring(i+r.length);n=s+e[o]+a}return n},u=[0,6,77,81,73,115,100,112,3],c=[0,4,77,81,84,84,4],h=function(t,e){for(var n in this.type=t,e)e.hasOwnProperty(n)&&(this[n]=e[n])};function l(t,n){var r,i=n,o=t[n],s=o>>4,a=o&=15;n+=1;var u=0,c=1;do{if(n==t.length)return[null,i];u+=(127&(r=t[n++]))*c,c*=128}while(0!==(128&r));var f=n+u;if(f>t.length)return[null,i];var l=new h(s);switch(s){case e.CONNACK:1&t[n++]&&(l.sessionPresent=!0),l.returnCode=t[n++];break;case e.PUBLISH:var d=a>>1&3,p=g(t,n),y=v(t,n+=2,p);n+=p,d>0&&(l.messageIdentifier=g(t,n),n+=2);var m=new E(t.subarray(n,f));1==(1&a)&&(m.retained=!0),8==(8&a)&&(m.duplicate=!0),m.qos=d,m.destinationName=y,l.payloadMessage=m;break;case e.PUBACK:case e.PUBREC:case e.PUBREL:case e.PUBCOMP:case e.UNSUBACK:l.messageIdentifier=g(t,n);break;case e.SUBACK:l.messageIdentifier=g(t,n),n+=2,l.returnCode=t.subarray(n,f)}return[l,f]}function d(t,e,n){return e[n++]=t>>8,e[n++]=t%256,n}function p(t,e,n,r){return m(t,n,r=d(e,n,r)),r+e}function g(t,e){return 256*t[e]+t[e+1]}function y(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,e++),e+=3):r>127?e+=2:e++}return e}function m(t,e,n){for(var r=n,o=0;o<t.length;o++){var a=t.charCodeAt(o);if(55296<=a&&a<=56319){var u=t.charCodeAt(++o);if(isNaN(u))throw new Error(s(i.MALFORMED_UNICODE,[a,u]));a=u-56320+(a-55296<<10)+65536}a<=127?e[r++]=a:a<=2047?(e[r++]=a>>6&31|192,e[r++]=63&a|128):a<=65535?(e[r++]=a>>12&15|224,e[r++]=a>>6&63|128,e[r++]=63&a|128):(e[r++]=a>>18&7|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=63&a|128)}return e}function v(t,e,n){for(var r,o=\"\",a=e;a<e+n;){var u=t[a++];if(u<128)r=u;else{var c=t[a++]-128;if(c<0)throw new Error(s(i.MALFORMED_UTF,[u.toString(16),c.toString(16),\"\"]));if(u<224)r=64*(u-192)+c;else{var h=t[a++]-128;if(h<0)throw new Error(s(i.MALFORMED_UTF,[u.toString(16),c.toString(16),h.toString(16)]));if(u<240)r=4096*(u-224)+64*c+h;else{var f=t[a++]-128;if(f<0)throw new Error(s(i.MALFORMED_UTF,[u.toString(16),c.toString(16),h.toString(16),f.toString(16)]));if(!(u<248))throw new Error(s(i.MALFORMED_UTF,[u.toString(16),c.toString(16),h.toString(16),f.toString(16)]));r=262144*(u-240)+4096*c+64*h+f}}}r>65535&&(r-=65536,o+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),o+=String.fromCharCode(r)}return o}h.prototype.encode=function(){var t,n=(15&this.type)<<4,r=0,i=[],o=0;switch(void 0!==this.messageIdentifier&&(r+=2),this.type){case e.CONNECT:switch(this.mqttVersion){case 3:r+=u.length+3;break;case 4:r+=c.length+3}r+=y(this.clientId)+2,void 0!==this.willMessage&&(r+=y(this.willMessage.destinationName)+2,(t=this.willMessage.payloadBytes)instanceof Uint8Array||(t=new Uint8Array(a)),r+=t.byteLength+2),void 0!==this.userName&&(r+=y(this.userName)+2),void 0!==this.password&&(r+=y(this.password)+2);break;case e.SUBSCRIBE:n|=2;for(var s=0;s<this.topics.length;s++)i[s]=y(this.topics[s]),r+=i[s]+2;r+=this.requestedQos.length;break;case e.UNSUBSCRIBE:n|=2;for(s=0;s<this.topics.length;s++)i[s]=y(this.topics[s]),r+=i[s]+2;break;case e.PUBREL:n|=2;break;case e.PUBLISH:this.payloadMessage.duplicate&&(n|=8),n=n|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(n|=1),r+=(o=y(this.payloadMessage.destinationName))+2;var a=this.payloadMessage.payloadBytes;r+=a.byteLength,a instanceof ArrayBuffer?a=new Uint8Array(a):a instanceof Uint8Array||(a=new Uint8Array(a.buffer));break;case e.DISCONNECT:}var h=function(t){var e=new Array(1),n=0;do{var r=t%128;(t>>=7)>0&&(r|=128),e[n++]=r}while(t>0&&n<4);return e}(r),f=h.length+1,l=new ArrayBuffer(r+f),g=new Uint8Array(l);if(g[0]=n,g.set(h,1),this.type==e.PUBLISH)f=p(this.payloadMessage.destinationName,o,g,f);else if(this.type==e.CONNECT){switch(this.mqttVersion){case 3:g.set(u,f),f+=u.length;break;case 4:g.set(c,f),f+=c.length}var m=0;this.cleanSession&&(m=2),void 0!==this.willMessage&&(m|=4,m|=this.willMessage.qos<<3,this.willMessage.retained&&(m|=32)),void 0!==this.userName&&(m|=128),void 0!==this.password&&(m|=64),g[f++]=m,f=d(this.keepAliveInterval,g,f)}switch(void 0!==this.messageIdentifier&&(f=d(this.messageIdentifier,g,f)),this.type){case e.CONNECT:f=p(this.clientId,y(this.clientId),g,f),void 0!==this.willMessage&&(f=p(this.willMessage.destinationName,y(this.willMessage.destinationName),g,f),f=d(t.byteLength,g,f),g.set(t,f),f+=t.byteLength),void 0!==this.userName&&(f=p(this.userName,y(this.userName),g,f)),void 0!==this.password&&(f=p(this.password,y(this.password),g,f));break;case e.PUBLISH:g.set(a,f);break;case e.SUBSCRIBE:for(s=0;s<this.topics.length;s++)f=p(this.topics[s],i[s],g,f),g[f++]=this.requestedQos[s];break;case e.UNSUBSCRIBE:for(s=0;s<this.topics.length;s++)f=p(this.topics[s],i[s],g,f)}return l};var _=function(n,r){this._client=n,this._keepAliveInterval=1e3*r,this.isReset=!1;var o=new h(e.PINGREQ).encode(),a=function(t){return function(){return u.apply(t)}},u=function(){this.isReset?(this.isReset=!1,this._client._trace(\"Pinger.doPing\",\"send PINGREQ\"),t.sendSocketMessage({data:f.encode(o),isBuffer:!0,success:function(){},fail:function(){},complete:function(){}}),this.timeout=setTimeout(a(this),this._keepAliveInterval)):(this._client._trace(\"Pinger.doPing\",\"Timed out\"),this._client._disconnected(i.PING_TIMEOUT.code,s(i.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(a(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},b=function(t,e,n,r){e||(e=30);this.timeout=setTimeout(function(t,e,n){return function(){return t.apply(e,n)}}(n,t,r),1e3*e),this.cancel=function(){clearTimeout(this.timeout)}},w=function(e,n,r,i,o){for(var s in this._trace(\"Paho.MQTT.Client\",e,n,r,i,o),this.host=n,this.port=r,this.path=i,this.uri=e,this.clientId=o,this._wsuri=null,this._localKey=n+\":\"+r+(\"/mqtt\"!=i?\":\"+i:\"\")+\":\"+o+\":\",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,t.getStorageInfoSync().keys)0!==s.indexOf(\"Sent:\"+this._localKey)&&0!==s.indexOf(\"Received:\"+this._localKey)||this.restore(s)};w.prototype.host=null,w.prototype.port=null,w.prototype.path=null,w.prototype.uri=null,w.prototype.clientId=null,w.prototype.socket=null,w.prototype.connected=!1,w.prototype.maxMessageIdentifier=65536,w.prototype.connectOptions=null,w.prototype.hostIndex=null,w.prototype.onConnected=null,w.prototype.onConnectionLost=null,w.prototype.onMessageDelivered=null,w.prototype.onMessageArrived=null,w.prototype.traceFunction=null,w.prototype._msg_queue=null,w.prototype._buffered_msg_queue=null,w.prototype._connectTimeout=null,w.prototype.sendPinger=null,w.prototype.receivePinger=null,w.prototype._reconnectInterval=1,w.prototype._reconnecting=!1,w.prototype._reconnectTimeout=null,w.prototype.disconnectedPublishing=!1,w.prototype.disconnectedBufferSize=5e3,w.prototype.receiveBuffer=null,w.prototype._traceBuffer=null,w.prototype._MAX_TRACE_ENTRIES=100,w.prototype.connect=function(t){var e=this._traceMask(t,\"password\");if(this._trace(\"Client.connect\",e,null,this.connected),this.connected)throw new Error(s(i.INVALID_STATE,[\"already connected\"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=t,this._reconnectInterval=1,this._reconnecting=!1,t.uris?(this.hostIndex=0,this._doConnect(t.uris[0])):this._doConnect(this.uri)},w.prototype.subscribe=function(t,n){if(this._trace(\"Client.subscribe\",t,n),!this.connected)throw new Error(s(i.INVALID_STATE,[\"not connected\"]));var r=new h(e.SUBSCRIBE);r.topics=[t],void 0!==n.qos?r.requestedQos=[n.qos]:r.requestedQos=[0],n.onSuccess&&(r.onSuccess=function(t){n.onSuccess({invocationContext:n.invocationContext,grantedQos:t})}),n.onFailure&&(r.onFailure=function(t){n.onFailure({invocationContext:n.invocationContext,errorCode:t,errorMessage:s(t)})}),n.timeout&&(r.timeOut=new b(this,n.timeout,n.onFailure,[{invocationContext:n.invocationContext,errorCode:i.SUBSCRIBE_TIMEOUT.code,errorMessage:s(i.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(r),this._schedule_message(r)},w.prototype.unsubscribe=function(t,n){if(this._trace(\"Client.unsubscribe\",t,n),!this.connected)throw new Error(s(i.INVALID_STATE,[\"not connected\"]));var r=new h(e.UNSUBSCRIBE);r.topics=[t],n.onSuccess&&(r.callback=function(){n.onSuccess({invocationContext:n.invocationContext})}),n.timeout&&(r.timeOut=new b(this,n.timeout,n.onFailure,[{invocationContext:n.invocationContext,errorCode:i.UNSUBSCRIBE_TIMEOUT.code,errorMessage:s(i.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(r),this._schedule_message(r)},w.prototype.send=function(t){this._trace(\"Client.send\",t);var n=new h(e.PUBLISH);if(n.payloadMessage=t,this.connected)t.qos>0?this._requires_ack(n):this.onMessageDelivered&&(this._notify_msg_sent[n]=this.onMessageDelivered(n.payloadMessage)),this._schedule_message(n);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(s(i.INVALID_STATE,[\"not connected\"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(s(i.BUFFER_FULL,[this.disconnectedBufferSize]));t.qos>0?this._requires_ack(n):(n.sequence=++this._sequence,this._buffered_msg_queue.push(n))}},w.prototype.disconnect=function(){if(this._trace(\"Client.disconnect\"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.connected)throw new Error(s(i.INVALID_STATE,[\"not connecting or connected\"]));var t=new h(e.DISCONNECT);this._notify_msg_sent[t]=r(this._disconnected,this),this._schedule_message(t)},w.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var t in this._trace(\"Client.getTraceLog\",new Date),this._trace(\"Client.getTraceLog in flight messages\",this._sentMessages.length),this._sentMessages)this._trace(\"_sentMessages \",t,this._sentMessages[t]);for(var t in this._receivedMessages)this._trace(\"_receivedMessages \",t,this._receivedMessages[t]);return this._traceBuffer}},w.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace(\"Client.startTrace\",new Date,\"@VERSION@\")},w.prototype.stopTrace=function(){delete this._traceBuffer},w.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var n=e.split(\":\");n[0]=\"wss\",e=n.join(\":\")}this._wsuri=e,this.connected=!1,t.connectSocket({url:e,protocols:[\"mqtt\"]}),t.onSocketOpen(r(this._on_socket_open,this)),t.onSocketMessage(r(this._on_socket_message,this)),t.onSocketError(r(this._on_socket_error,this)),t.onSocketClose(r(this._on_socket_close,this)),this.sendPinger=new _(this,this.connectOptions.keepAliveInterval),this.receivePinger=new _(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new b(this,this.connectOptions.timeout,this._disconnected,[i.CONNECT_TIMEOUT.code,s(i.CONNECT_TIMEOUT)])},w.prototype._schedule_message=function(t){this._msg_queue.push(t),this.connected&&this._process_queue()},w.prototype.store=function(n,r){var o={type:r.type,messageIdentifier:r.messageIdentifier,version:1};switch(r.type){case e.PUBLISH:r.pubRecReceived&&(o.pubRecReceived=!0),o.payloadMessage={};for(var a=\"\",u=r.payloadMessage.payloadBytes,c=0;c<u.length;c++)u[c]<=15?a=a+\"0\"+u[c].toString(16):a+=u[c].toString(16);o.payloadMessage.payloadHex=a,o.payloadMessage.qos=r.payloadMessage.qos,o.payloadMessage.destinationName=r.payloadMessage.destinationName,r.payloadMessage.duplicate&&(o.payloadMessage.duplicate=!0),r.payloadMessage.retained&&(o.payloadMessage.retained=!0),0===n.indexOf(\"Sent:\")&&(void 0===r.sequence&&(r.sequence=++this._sequence),o.sequence=r.sequence);break;default:throw Error(s(i.INVALID_STORED_DATA,[key,o]))}t.setStorageSync({key:n+this._localKey+r.messageIdentifier,data:JSON.stringify(o)})},w.prototype.restore=function(n){var r=t.getStorageSync({key:n}).data,o=JSON.parse(r),a=new h(o.type,o);switch(o.type){case e.PUBLISH:for(var u=o.payloadMessage.payloadHex,c=new ArrayBuffer(u.length/2),f=new Uint8Array(c),l=0;u.length>=2;){var d=parseInt(u.substring(0,2),16);u=u.substring(2,u.length),f[l++]=d}var p=new E(f);p.qos=o.payloadMessage.qos,p.destinationName=o.payloadMessage.destinationName,o.payloadMessage.duplicate&&(p.duplicate=!0),o.payloadMessage.retained&&(p.retained=!0),a.payloadMessage=p;break;default:throw Error(s(i.INVALID_STORED_DATA,[n,r]))}0===n.indexOf(\"Sent:\"+this._localKey)?(a.payloadMessage.duplicate=!0,this._sentMessages[a.messageIdentifier]=a):0===n.indexOf(\"Received:\"+this._localKey)&&(this._receivedMessages[a.messageIdentifier]=a)},w.prototype._process_queue=function(){for(var t=null,e=this._msg_queue.reverse();t=e.pop();)this._socket_send(t),this._notify_msg_sent[t]&&(this._notify_msg_sent[t](),delete this._notify_msg_sent[t])},w.prototype._requires_ack=function(t){var n=Object.keys(this._sentMessages).length;if(n>this.maxMessageIdentifier)throw Error(\"Too many messages:\"+n);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;t.messageIdentifier=this._message_identifier,this._sentMessages[t.messageIdentifier]=t,t.type===e.PUBLISH&&this.store(\"Sent:\",t),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},w.prototype._on_socket_open=function(t){var n=new h(e.CONNECT,this.connectOptions);n.clientId=this.clientId,this._socket_send(n)},w.prototype._on_socket_message=function(t){var e=f.decode(t.data);this._trace(\"Client._on_socket_message\",e);for(var n=this._deframeMessages(e),r=0;r<n.length;r+=1)this._handleMessage(n[r])},w.prototype._deframeMessages=function(t){var e=new Uint8Array(t),n=[];if(this.receiveBuffer){var r=new Uint8Array(this.receiveBuffer.length+e.length);r.set(this.receiveBuffer),r.set(e,this.receiveBuffer.length),e=r,delete this.receiveBuffer}try{for(var o=0;o<e.length;){var a=l(e,o),u=a[0];if(o=a[1],null===u)break;n.push(u)}o<e.length&&(this.receiveBuffer=e.subarray(o))}catch(t){var c=\"undefined\"==t.hasOwnProperty(\"stack\")?t.stack.toString():\"No Error Stack Available\";return void this._disconnected(i.INTERNAL_ERROR.code,s(i.INTERNAL_ERROR,[t.message,c]))}return n},w.prototype._handleMessage=function(n){this._trace(\"Client._handleMessage\",n);try{switch(n.type){case e.CONNACK:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var r in this._sentMessages){var a=this._sentMessages[r];t.removeStorageSync({key:\"Sent:\"+this._localKey+a.messageIdentifier})}for(var r in this._sentMessages={},this._receivedMessages){var u=this._receivedMessages[r];t.removeStorageSync({key:\"Received:\"+this._localKey+u.messageIdentifier})}this._receivedMessages={}}if(0!==n.returnCode){this._disconnected(i.CONNACK_RETURNCODE.code,s(i.CONNACK_RETURNCODE,[n.returnCode,o[n.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var c=[];for(var f in this._sentMessages)this._sentMessages.hasOwnProperty(f)&&c.push(this._sentMessages[f]);if(this._buffered_msg_queue.length>0)for(var l=null,d=this._buffered_msg_queue.reverse();l=d.pop();)c.push(l),this.onMessageDelivered&&(this._notify_msg_sent[l]=this.onMessageDelivered(l.payloadMessage));for(var p=0,g=(c=c.sort(function(t,e){return t.sequence-e.sequence})).length;p<g;p++){if((a=c[p]).type==e.PUBLISH&&a.pubRecReceived){var y=new h(e.PUBREL,{messageIdentifier:a.messageIdentifier});this._schedule_message(y)}else this._schedule_message(a)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var m=!1;this._reconnecting&&(m=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(m,this._wsuri),this._process_queue();break;case e.PUBLISH:this._receivePublish(n);break;case e.PUBACK:(a=this._sentMessages[n.messageIdentifier])&&(delete this._sentMessages[n.messageIdentifier],t.removeStorageSync({key:\"Sent:\"+this._localKey+n.messageIdentifier}),this.onMessageDelivered&&this.onMessageDelivered(a.payloadMessage));break;case e.PUBREC:if(a=this._sentMessages[n.messageIdentifier]){a.pubRecReceived=!0;y=new h(e.PUBREL,{messageIdentifier:n.messageIdentifier});this.store(\"Sent:\",a),this._schedule_message(y)}break;case e.PUBREL:u=this._receivedMessages[n.messageIdentifier];t.removeStorageSync({key:\"Received:\"+this._localKey+n.messageIdentifier}),u&&(this._receiveMessage(u),delete this._receivedMessages[n.messageIdentifier]);var v=new h(e.PUBCOMP,{messageIdentifier:n.messageIdentifier});this._schedule_message(v);break;case e.PUBCOMP:a=this._sentMessages[n.messageIdentifier];delete this._sentMessages[n.messageIdentifier],t.removeStorageSync({key:\"Sent:\"+this._localKey+n.messageIdentifier}),this.onMessageDelivered&&this.onMessageDelivered(a.payloadMessage);break;case e.SUBACK:(a=this._sentMessages[n.messageIdentifier])&&(a.timeOut&&a.timeOut.cancel(),128===n.returnCode[0]?a.onFailure&&a.onFailure(n.returnCode):a.onSuccess&&a.onSuccess(n.returnCode),delete this._sentMessages[n.messageIdentifier]);break;case e.UNSUBACK:(a=this._sentMessages[n.messageIdentifier])&&(a.timeOut&&a.timeOut.cancel(),a.callback&&a.callback(),delete this._sentMessages[n.messageIdentifier]);break;case e.PINGRESP:this.sendPinger.reset();break;case e.DISCONNECT:this._disconnected(i.INVALID_MQTT_MESSAGE_TYPE.code,s(i.INVALID_MQTT_MESSAGE_TYPE,[n.type]));break;default:this._disconnected(i.INVALID_MQTT_MESSAGE_TYPE.code,s(i.INVALID_MQTT_MESSAGE_TYPE,[n.type]))}}catch(t){var _=\"undefined\"==t.hasOwnProperty(\"stack\")?t.stack.toString():\"No Error Stack Available\";return void this._disconnected(i.INTERNAL_ERROR.code,s(i.INTERNAL_ERROR,[t.message,_]))}},w.prototype._on_socket_error=function(t){this._reconnecting||this._disconnected(i.SOCKET_ERROR.code,s(i.SOCKET_ERROR,[t.data]))},w.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(i.SOCKET_CLOSE.code,s(i.SOCKET_CLOSE))},w.prototype._socket_send=function(e){if(1==e.type){var n=this._traceMask(e,\"password\");this._trace(\"Client._socket_send\",n)}else this._trace(\"Client._socket_send\",e);t.sendSocketMessage({data:f.encode(e.encode()),isBuffer:!0,success:function(){},fail:function(){},complete:function(){}}),this.sendPinger.reset()},w.prototype._receivePublish=function(t){switch(t.payloadMessage.qos){case\"undefined\":case 0:this._receiveMessage(t);break;case 1:var n=new h(e.PUBACK,{messageIdentifier:t.messageIdentifier});this._schedule_message(n),this._receiveMessage(t);break;case 2:this._receivedMessages[t.messageIdentifier]=t,this.store(\"Received:\",t);var r=new h(e.PUBREC,{messageIdentifier:t.messageIdentifier});this._schedule_message(r);break;default:throw Error(\"Invaild qos=\"+wireMmessage.payloadMessage.qos)}},w.prototype._receiveMessage=function(t){this.onMessageArrived&&this.onMessageArrived(t.payloadMessage)},w.prototype._connected=function(t,e){this.onConnected&&this.onConnected(t,e)},w.prototype._reconnect=function(){this._trace(\"Client._reconnect\"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},w.prototype._disconnected=function(t,e){if(this._trace(\"Client._disconnected\",t,e),void 0!==t&&this._reconnecting)this._reconnectTimeout=new b(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===t&&(t=i.OK.code,e=s(i.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:t,errorMessage:e,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),t!==i.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace(\"Failed to connect V4, dropping back to V3\"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:t,errorMessage:e})},w.prototype._trace=function(){if(this.traceFunction){for(var t in arguments)\"undefined\"!==typeof arguments[t]&&arguments.splice(t,1,JSON.stringify(arguments[t]));var e=Array.prototype.slice.call(arguments).join(\"\");this.traceFunction({severity:\"Debug\",message:e})}if(null!==this._traceBuffer){t=0;for(var n=arguments.length;t<n;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===t?this._traceBuffer.push(arguments[t]):\"undefined\"===typeof arguments[t]?this._traceBuffer.push(arguments[t]):this._traceBuffer.push(\"  \"+JSON.stringify(arguments[t]))}},w.prototype._traceMask=function(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=r==e?\"******\":t[r]);return n};var S=function(t,e,r,o){var u;if(\"string\"!==typeof t)throw new Error(s(i.INVALID_TYPE,[\"undefined\"===typeof t?\"undefined\":(0,a.default)(t),\"host\"]));if(2==arguments.length){o=e;var c=(u=t).match(/^(wss?):\\/\\/((\\[(.+)\\])|([^\\/]+?))(:(\\d+))?(\\/.*)$/);if(!c)throw new Error(s(i.INVALID_ARGUMENT,[t,\"host\"]));t=c[4]||c[2],e=parseInt(c[7]),r=c[8]}else{if(3==arguments.length&&(o=r,r=\"/mqtt\"),\"number\"!==typeof e||e<0)throw new Error(s(i.INVALID_TYPE,[\"undefined\"===typeof e?\"undefined\":(0,a.default)(e),\"port\"]));if(\"string\"!==typeof r)throw new Error(s(i.INVALID_TYPE,[\"undefined\"===typeof r?\"undefined\":(0,a.default)(r),\"path\"]));var h=-1!==t.indexOf(\":\")&&\"[\"!==t.slice(0,1)&&\"]\"!==t.slice(-1);u=\"ws://\"+(h?\"[\"+t+\"]\":t)+\":\"+e+r}for(var f=0,l=0;l<o.length;l++){var d=o.charCodeAt(l);55296<=d&&d<=56319&&l++,f++}if(\"string\"!==typeof o||f>65535)throw new Error(s(i.INVALID_ARGUMENT,[o,\"clientId\"]));var p=new w(u,t,e,r,o);this._getHost=function(){return t},this._setHost=function(){throw new Error(s(i.UNSUPPORTED_OPERATION))},this._getPort=function(){return e},this._setPort=function(){throw new Error(s(i.UNSUPPORTED_OPERATION))},this._getPath=function(){return r},this._setPath=function(){throw new Error(s(i.UNSUPPORTED_OPERATION))},this._getURI=function(){return u},this._setURI=function(){throw new Error(s(i.UNSUPPORTED_OPERATION))},this._getClientId=function(){return p.clientId},this._setClientId=function(){throw new Error(s(i.UNSUPPORTED_OPERATION))},this._getOnConnected=function(){return p.onConnected},this._setOnConnected=function(t){if(\"function\"!==typeof t)throw new Error(s(i.INVALID_TYPE,[\"undefined\"===typeof t?\"undefined\":(0,a.default)(t),\"onConnected\"]));p.onConnected=t},this._getDisconnectedPublishing=function(){return p.disconnectedPublishing},this._setDisconnectedPublishing=function(t){p.disconnectedPublishing=t},this._getDisconnectedBufferSize=function(){return p.disconnectedBufferSize},this._setDisconnectedBufferSize=function(t){p.disconnectedBufferSize=t},this._getOnConnectionLost=function(){return p.onConnectionLost},this._setOnConnectionLost=function(t){if(\"function\"!==typeof t)throw new Error(s(i.INVALID_TYPE,[\"undefined\"===typeof t?\"undefined\":(0,a.default)(t),\"onConnectionLost\"]));p.onConnectionLost=t},this._getOnMessageDelivered=function(){return p.onMessageDelivered},this._setOnMessageDelivered=function(t){if(\"function\"!==typeof t)throw new Error(s(i.INVALID_TYPE,[\"undefined\"===typeof t?\"undefined\":(0,a.default)(t),\"onMessageDelivered\"]));p.onMessageDelivered=t},this._getOnMessageArrived=function(){return p.onMessageArrived},this._setOnMessageArrived=function(t){if(\"function\"!==typeof t)throw new Error(s(i.INVALID_TYPE,[\"undefined\"===typeof t?\"undefined\":(0,a.default)(t),\"onMessageArrived\"]));p.onMessageArrived=t},this._getTrace=function(){return p.traceFunction},this._setTrace=function(t){if(\"function\"!==typeof t)throw new Error(s(i.INVALID_TYPE,[\"undefined\"===typeof t?\"undefined\":(0,a.default)(t),\"onTrace\"]));p.traceFunction=t},this.connect=function(t){if(n(t=t||{},{timeout:\"number\",userName:\"string\",password:\"string\",willMessage:\"object\",keepAliveInterval:\"number\",cleanSession:\"boolean\",useSSL:\"boolean\",invocationContext:\"object\",onSuccess:\"function\",onFailure:\"function\",hosts:\"object\",ports:\"object\",reconnect:\"boolean\",mqttVersion:\"number\",mqttVersionExplicit:\"boolean\",uris:\"object\"}),void 0===t.keepAliveInterval&&(t.keepAliveInterval=60),t.mqttVersion>4||t.mqttVersion<3)throw new Error(s(i.INVALID_ARGUMENT,[t.mqttVersion,\"connectOptions.mqttVersion\"]));if(void 0===t.mqttVersion?(t.mqttVersionExplicit=!1,t.mqttVersion=4):t.mqttVersionExplicit=!0,void 0!==t.password&&void 0===t.userName)throw new Error(s(i.INVALID_ARGUMENT,[t.password,\"connectOptions.password\"]));if(t.willMessage){if(!(t.willMessage instanceof E))throw new Error(s(i.INVALID_TYPE,[t.willMessage,\"connectOptions.willMessage\"]));if(t.willMessage.stringPayload=null,\"undefined\"===typeof t.willMessage.destinationName)throw new Error(s(i.INVALID_TYPE,[(0,a.default)(t.willMessage.destinationName),\"connectOptions.willMessage.destinationName\"]))}if(\"undefined\"===typeof t.cleanSession&&(t.cleanSession=!0),t.hosts){if(!(t.hosts instanceof Array))throw new Error(s(i.INVALID_ARGUMENT,[t.hosts,\"connectOptions.hosts\"]));if(t.hosts.length<1)throw new Error(s(i.INVALID_ARGUMENT,[t.hosts,\"connectOptions.hosts\"]));for(var e=!1,o=0;o<t.hosts.length;o++){if(\"string\"!==typeof t.hosts[o])throw new Error(s(i.INVALID_TYPE,[(0,a.default)(t.hosts[o]),\"connectOptions.hosts[\"+o+\"]\"]));if(/^(wss?):\\/\\/((\\[(.+)\\])|([^\\/]+?))(:(\\d+))?(\\/.*)$/.test(t.hosts[o])){if(0===o)e=!0;else if(!e)throw new Error(s(i.INVALID_ARGUMENT,[t.hosts[o],\"connectOptions.hosts[\"+o+\"]\"]))}else if(e)throw new Error(s(i.INVALID_ARGUMENT,[t.hosts[o],\"connectOptions.hosts[\"+o+\"]\"]))}if(e)t.uris=t.hosts;else{if(!t.ports)throw new Error(s(i.INVALID_ARGUMENT,[t.ports,\"connectOptions.ports\"]));if(!(t.ports instanceof Array))throw new Error(s(i.INVALID_ARGUMENT,[t.ports,\"connectOptions.ports\"]));if(t.hosts.length!==t.ports.length)throw new Error(s(i.INVALID_ARGUMENT,[t.ports,\"connectOptions.ports\"]));t.uris=[];for(o=0;o<t.hosts.length;o++){if(\"number\"!==typeof t.ports[o]||t.ports[o]<0)throw new Error(s(i.INVALID_TYPE,[(0,a.default)(t.ports[o]),\"connectOptions.ports[\"+o+\"]\"]));var c=t.hosts[o],h=t.ports[o],f=-1!==c.indexOf(\":\");u=\"ws://\"+(f?\"[\"+c+\"]\":c)+\":\"+h+r,t.uris.push(u)}}}p.connect(t)},this.subscribe=function(t,e){if(\"string\"!==typeof t)throw new Error(\"Invalid argument:\"+t);if(n(e=e||{},{qos:\"number\",invocationContext:\"object\",onSuccess:\"function\",onFailure:\"function\",timeout:\"number\"}),e.timeout&&!e.onFailure)throw new Error(\"subscribeOptions.timeout specified with no onFailure callback.\");if(\"undefined\"!==typeof e.qos&&0!==e.qos&&1!==e.qos&&2!==e.qos)throw new Error(s(i.INVALID_ARGUMENT,[e.qos,\"subscribeOptions.qos\"]));p.subscribe(t,e)},this.unsubscribe=function(t,e){if(\"string\"!==typeof t)throw new Error(\"Invalid argument:\"+t);if(n(e=e||{},{invocationContext:\"object\",onSuccess:\"function\",onFailure:\"function\",timeout:\"number\"}),e.timeout&&!e.onFailure)throw new Error(\"unsubscribeOptions.timeout specified with no onFailure callback.\");p.unsubscribe(t,e)},this.send=function(t,e,n,r){var o;if(0===arguments.length)throw new Error(\"Invalid argument.length\");if(1==arguments.length){if(!(t instanceof E)&&\"string\"!==typeof t)throw new Error(\"Invalid argument:\"+(\"undefined\"===typeof t?\"undefined\":(0,a.default)(t)));if(\"undefined\"===typeof(o=t).destinationName)throw new Error(s(i.INVALID_ARGUMENT,[o.destinationName,\"Message.destinationName\"]));p.send(o)}else(o=new E(e)).destinationName=t,arguments.length>=3&&(o.qos=n),arguments.length>=4&&(o.retained=r),p.send(o)},this.publish=function(t,e,n,r){var o;if(console.log(\"Publising message to: \",t),0===arguments.length)throw new Error(\"Invalid argument.length\");if(1==arguments.length){if(!(t instanceof E)&&\"string\"!==typeof t)throw new Error(\"Invalid argument:\"+(\"undefined\"===typeof t?\"undefined\":(0,a.default)(t)));if(\"undefined\"===typeof(o=t).destinationName)throw new Error(s(i.INVALID_ARGUMENT,[o.destinationName,\"Message.destinationName\"]));p.send(o)}else(o=new E(e)).destinationName=t,arguments.length>=3&&(o.qos=n),arguments.length>=4&&(o.retained=r),p.send(o)},this.disconnect=function(){p.disconnect()},this.getTraceLog=function(){return p.getTraceLog()},this.startTrace=function(){p.startTrace()},this.stopTrace=function(){p.stopTrace()},this.isConnected=function(){return p.connected}};S.prototype={get host(){return this._getHost()},set host(t){this._setHost(t)},get port(){return this._getPort()},set port(t){this._setPort(t)},get path(){return this._getPath()},set path(t){this._setPath(t)},get clientId(){return this._getClientId()},set clientId(t){this._setClientId(t)},get onConnected(){return this._getOnConnected()},set onConnected(t){this._setOnConnected(t)},get disconnectedPublishing(){return this._getDisconnectedPublishing()},set disconnectedPublishing(t){this._setDisconnectedPublishing(t)},get disconnectedBufferSize(){return this._getDisconnectedBufferSize()},set disconnectedBufferSize(t){this._setDisconnectedBufferSize(t)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(t){this._setOnConnectionLost(t)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(t){this._setOnMessageDelivered(t)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(t){this._setOnMessageArrived(t)},get trace(){return this._getTrace()},set trace(t){this._setTrace(t)}};var E=function(t){var e,n;if(!(\"string\"===typeof t||t instanceof ArrayBuffer||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array))throw s(i.INVALID_ARGUMENT,[t,\"newPayload\"]);e=t,this._getPayloadString=function(){return\"string\"===typeof e?e:v(e,0,e.length)},this._getPayloadBytes=function(){if(\"string\"===typeof e){var t=new ArrayBuffer(y(e)),n=new Uint8Array(t);return m(e,n,0),n}return e},this._getDestinationName=function(){return n},this._setDestinationName=function(t){if(\"string\"!==typeof t)throw new Error(s(i.INVALID_ARGUMENT,[t,\"newDestinationName\"]));n=t};var r=0;this._getQos=function(){return r},this._setQos=function(t){if(0!==t&&1!==t&&2!==t)throw new Error(\"Invalid argument:\"+t);r=t};var o=!1;this._getRetained=function(){return o},this._setRetained=function(t){if(\"boolean\"!==typeof t)throw new Error(s(i.INVALID_ARGUMENT,[t,\"newRetained\"]));o=t};var a=!1;this._getDuplicate=function(){return a},this._setDuplicate=function(t){a=t}};return E.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(t){this._setDestinationName(t)},get topic(){return this._getDestinationName()},set topic(t){this._setDestinationName(t)},get qos(){return this._getQos()},set qos(t){this._setQos(t)},get retained(){return this._getRetained()},set retained(t){this._setRetained(t)},get duplicate(){return this._getDuplicate()},set duplicate(t){this._setDuplicate(t)}},{Client:S,Message:E}}(h)},\"object\"===(0,a.default)(e)&&\"object\"===(0,a.default)(t)?t.exports=c():void 0===(i=\"function\"===typeof(r=c)?r.call(e,n,e,t):r)||(t.exports=i)}).call(this,n(91)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,\"loaded\",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,\"id\",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){\"use strict\";(function(t){var e,r=n(0),o=n(16);(e=o)&&e.__esModule;r.bridge;var s=r.bridge;r.$global.currentPageConfig={pagePath:\"pages/chargeState/chargeState\",usingComponents:{}};n(31);var a=n(3),u=(0,r.getApp)();(0,r.Page)({data:{canvasShow:!1,chargeProgress:20,balance:\"\",show:!0,orderId:null,chargeList:{paidAmount:0},interval:\"\"},onShow:function(){var t=this;this.data.chargeList.chargedPileId;this.getAccessToken();var e=s.getStorageSync({key:\"chargeList\"}).data;if(e.state=5&null!=e.chargingEndTime&void 0!=e.chargingEndTime){var n=e.chargingEndTime-e.chargingBeginTime;e.chargeTime=Math.floor(n/60/1e3)}else{n=Date.parse(new Date)+2e4-e.chargingBeginTime;e.chargeTime=Math.floor(n/60/1e3)}1==e.priceMethod?e.paidAmount=e.electricity*e.chargingPrice+20:2==e.priceMethod&&(e.paidAmount=Math.floor(e.chargeTime/30)*e.chargingPrice+20),this.setData({chargeList:e}),5==e.status&&t.setData({show:!1,canvasShow:!0,chargeProgress:100});var r=setInterval(function(){a.get(\"/charging/current/chargedList\",{}).then(function(n){null==n?(t.setData({chargeList:n}),setTimeout(function(){s.reLaunch({url:\"/pages/index/index\"})},200)):e=n}).catch(function(t){console.log(t)}),t.updateChargeTime(e)},5e3);t.setData({interval:r}),console.log(t.data.chargeList)},endCharge:function(){var e=this;console.log(\"endCharge\"),e.setData({show:!1,canvasShow:!0});this.data.chargeList.chargedPileId;var n=this.createCloseNumCmd(this.data.chargeList.portId);new t(n);a.post(\"/charging/end\",{userId:s.getStorageSync({key:\"userId\"}).data,paidAmount:this.data.chargeList.paidAmount,chargeTime:this.data.chargeList.chargeTime,pileId:this.data.chargeList.chargedPileId,portId:this.data.chargeList.portId,id:this.data.chargeList.id,paymentId:2,orderType:1}).then(function(t){console.log(\"end.....\"),console.log(t);var n=t;n.orderId=t.orderId,e.setData({chargeList:n})}).catch(function(t){console.log(t)})},onReady:function(){var t=s.createCanvasContext(\"canvasArc\");t.setLineWidth(6),t.setStrokeStyle(\"#d2d2d2\"),t.setLineCap(\"round\"),t.beginPath(),t.arc(106,90,75,0,2*Math.PI,!1),t.stroke(),t.setLineWidth(6),t.setStrokeStyle(\"#1CD0A3\"),t.setLineCap(\"round\"),t.beginPath(),t.arc(106,90,75,1*-Math.PI/2,Math.PI*(2*this.data.chargeProgress/100-.5),!1),t.stroke(),t.draw()},onPullDownRefresh:function(){a.get(\"/charging/current/chargedList\",{}).then(function(t){null==t?(i.setData({chargeList:t}),setTimeout(function(){s.reLaunch({url:\"/pages/index/index\"})},200)):i.setData({chargeList:t})}).catch(function(t){console.log(t)})},createCloseNumCmd:function(t){var e=new Array(9);e[0]=60,e[1]=0,e[2]=81,e[3]=240,e[4]=9,e[5]=4,e[6]=t,e[7]=0;var n=255&e[0]+e[1]+e[2]+e[3]+e[4]+e[5]+e[6]+e[7];return e[8]=n,e[9]=70,e},hideCharge:function(){this.setData({show:!0,canvasShow:!1})},updateChargeTime:function(t){if(t.state=5&null!=t.chargingEndTime&void 0!=t.chargingEndTime){var e=t.chargingEndTime-t.chargingBeginTime;t.chargeTime=Math.floor(e/60/1e3)}else{e=Date.parse(new Date)+2e4-t.chargingBeginTime;t.chargeTime=Math.floor(e/60/1e3)}1==t.priceMethod?(t.paidAmount=t.electricity*t.chargingPrice+20,this.setData({chargeList:t})):2==t.priceMethod&&(t.paidAmount=Math.floor(t.chargeTime/30)*t.chargingPrice+20,this.setData({chargeList:t}))},readSendNumCmd:function(t){var e=this;t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17];if(43==t[0]&&0==t[1]&&81==t[2]){var n=t[5],r=this.data.chargeList;if(a.get(\"/charging/current/chargedList\",{}).then(function(t){null==t?(e.setData({chargeList:t}),setTimeout(function(){s.reLaunch({url:\"/pages/index/index\"})},200)):r=t}),r.voltage=256*t[6]+t[7],r.current=256*t[8]+t[9],r.power=256*t[10]+t[11],r.electricity=256*t[12]+t[13],r.chargeTime=256*t[14]+t[15],r.chargeState=t[16],r.state=5&null!=r.chargingEndTime&void 0!=r.chargingEndTime){var i=r.chargingEndTime-r.chargingBeginTime;r.chargeTime=Math.floor(i/60/1e3)}else{i=Date.parse(new Date)+2e4-r.chargingBeginTime;r.chargeTime=Math.floor(i/60/1e3)}1==r.priceMethod?r.paidAmount=r.electricity*r.chargingPrice+20:2==r.priceMethod&&(r.paidAmount=Math.floor(r.chargeTime/30)*r.chargingPrice+20)}n==r.portId&&this.setData({chargeList:r})},readCloseOkNumCmd:function(t){t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8];if(60==t[0]&&0==t[1]&&81==t[2]&&240==t[3]&&10==t[4]&&70==t[9]){t[5];var e=t[6];0==e||(255==e?s.showToast({title:\"\\u7ed3\\u675f\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\",icon:\"success\",duration:2e3}):console.log(\"\\u5145\\u7535\\u7ed3\\u675f\\u672a\\u77e5\\u95ee\\u9898\"))}console.log(\"\\u5145\\u7535\\u7ed3\\u675f\\u6570\\u636e\\u683c\\u5f0f\\u95ee\\u9898\")},getAccessToken:function(){var t=this;s.getAuthCode({scopes:\"auth_user\",fail:function(t){console.error(\"getAuthCode\",t)},success:function(e){console.log(\"getAuthCode\"),s.getAuthUserInfo({fail:function(t){console.error(\"getAuthUserInfo\",t)},success:function(n){console.log(n),a.post(\"/login/auth\",{code:e.authCode,oAuthType:\"alipay\"}).then(function(t){s.setStorageSync({key:\"access_token\",data:t.access_token}),u.globalData.userInfo=n,u.globalData.userInfo.userId=t.userId}).catch(function(t){console.log(t)}),t.setData({userInfo:n,hasUserInfo:!0})}})}})},pay:function(){var t=this,e=s.getStorageSync({key:\"openid\"}).data;console.log(e),null!=t.data.chargeList.orderId?(console.log(this.data.chargeList.orderId),a.post(\"/alipay/pay\",{orderId:t.data.chargeList.orderId,openid:e}).then(function(e){s.hideToast(),console.log(e),\"1\"==e.code?s.tradePay({tradeNO:e.tradeNO,success:function(e){t.setData({chargeList:e}),setTimeout(function(){s.reLaunch({url:\"/pages/index/index\"})},200)},fail:function(t){s.alert({content:JSON.stringify(t)})}}):\"2\"==e.code?setTimeout(function(){s.showToast({title:\"\\u672a\\u4ea7\\u751f\\u8d39\\u7528\",icon:\"success\",duration:2e3}),setTimeout(function(){s.reLaunch({url:\"/pages/index/index\"})},200)},200):s.showToast({title:\"\\u83b7\\u53d6\\u652f\\u4ed8\\u4fe1\\u606f\\u6210\\u529f\",icon:\"success\",duration:2e3})}).catch(function(t){s.hideToast(),console.log(t),s.showToast({title:\"\\u72b6\\u6001\\u5f02\\u5e38\\uff0c\\u8bf7\\u4e0b\\u62c9\\u66f4\\u65b0\",icon:\"success\",duration:2e3})})):a.get(\"/charging/current/chargedList\",{}).then(function(e){null==e?(t.setData({chargeList:e}),setTimeout(function(){s.reLaunch({url:\"/pages/index/index\"})},200)):t.setData({chargeList:e})}).catch(function(t){console.log(t)})},onUnload:function(){console.log(\"onUnload\"),clearInterval(this.data.interval)},onHide:function(){}})}).call(this,n(30).Buffer)}]);","extractedComments":[]}